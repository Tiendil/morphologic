(function(e){function t(t){for(var o,r,s=t[0],c=t[1],l=t[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],o=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var o={},n={app:0},i=[];function r(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=o,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/morphologic/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1b14":function(e){e.exports=JSON.parse('{"version":2,"items":{"items":{"adc5860b-de1e-4272-8a48-c919264ccc48":{"text":"Майка"},"7e59751f-6a18-4f7e-886e-fd84b36c7912":{"text":"Штаны"},"c418f98d-14c6-4228-bb68-d094ca7ea537":{"text":"Ботинки"},"1cc0ac02-0d7f-49a2-b8e1-6891ef152c7f":{"text":"Клатч"},"4d2e49f6-692c-4c7f-84c0-a992fb633a94":{"text":"серебряное с камнем"},"a18ab349-9fa1-492f-a180-e8755ccc8d82":{"text":"Кофта"},"d346c5b7-6a7c-401a-8380-4f0d9472b402":{"text":"Блузка"},"e715479a-0157-4be3-90b7-f98b63088db1":{"text":"Кардиган"},"38e1012f-bbe5-4167-a832-884b053d978c":{"text":"Пиджак"},"4fe526dc-ae2c-4181-ac7d-e8ec6c982906":{"text":"Шорты"},"16c70359-ffdb-4c5f-a234-a3486ea7c954":{"text":"Джинсы"},"0ba8b631-9a7c-4943-ac61-6a8eba69cc41":{"text":"Спортивки"},"628a94b9-6383-4814-9ef5-988f1fb41585":{"text":"Юбка"},"629eeb40-dbc6-4ecb-8467-82f78e1c8863":{"text":"Длинная юбка"},"48756475-4481-4189-8ced-919a6b11e9b7":{"text":"Платье в пол"},"01f78d7a-218f-4470-9f4a-c4ead65a91ff":{"text":"Кроссовки"},"031d8dfb-8f36-4875-96cd-0b039ea80278":{"text":"Туфли на низком каблуке"},"75f4cfd4-7883-495b-a8a9-b8b43c61e844":{"text":"Туфли на высоком каблуке"},"eaa80337-0376-4a8f-b825-a4b9b572e52b":{"text":"Балетки"},"c72f4d7a-5573-4021-9a5a-2e74c7f277ac":{"text":"Рюкзак"},"2f3a0dd7-2c77-4620-b849-9425051072b0":{"text":"Барсетка"},"725dfd5c-3897-43a2-9d2f-016a4acd244d":{"text":"серебряное без камня"},"a3825a86-d641-4d93-99b2-96c3d7d63a7a":{"text":"Сумочка"},"90995039-8380-428a-8c89-4674f8e0e855":{"text":"из белого золота с камнем"},"527a27a0-c9cb-44c6-b043-9afaa2434084":{"text":"из красного золота без камня"}}},"rules":{"rules":{"62475b57-9745-4327-a1c3-4ec4b8acb7e7":{"name":"Верх","type":"GROUP","template":{"type":"SET","uid":"bbbdcb7b-1f10-4250-970a-4951242fd0e3","data":{"expressions":[{"type":"ITEM","uid":"7f2db1ae-48c4-44c2-8147-6c4ee0fca81b","data":{"itemId":"adc5860b-de1e-4272-8a48-c919264ccc48"}},{"type":"ITEM","uid":"1bb52fbf-172b-4936-a939-69e5842de39a","data":{"itemId":"a18ab349-9fa1-492f-a180-e8755ccc8d82"}},{"type":"ITEM","uid":"ef1dafdf-351e-451e-a610-c3963b62bd96","data":{"itemId":"d346c5b7-6a7c-401a-8380-4f0d9472b402"}},{"type":"ITEM","uid":"fadd40ad-e142-48ef-80b5-aeceb26455e0","data":{"itemId":"e715479a-0157-4be3-90b7-f98b63088db1"}},{"type":"ITEM","uid":"23384960-57ab-47ac-81e2-86c9a40e1541","data":{"itemId":"38e1012f-bbe5-4167-a832-884b053d978c"}},{"type":"ITEM","uid":"6e93bea2-cf74-4ebd-9e16-05c705a7a3bf","data":{"itemId":"48756475-4481-4189-8ced-919a6b11e9b7"}}]}},"condition":{"type":"CARDINALITY","args":{"nOf":{"min":1,"max":2}}},"action":{"type":"ACCEPT","args":{"score":{"amount":0}}},"avatarIndex":6},"6ea2f31d-444f-4287-bbe6-2fcc73dec22b":{"name":"Низ","type":"GROUP","template":{"type":"SET","uid":"1a32af8a-e9b6-4f05-8351-0b34929b5a0a","data":{"expressions":[{"type":"ITEM","uid":"4ccc1ef9-5881-4cf4-b2e1-a5c274b33af8","data":{"itemId":"7e59751f-6a18-4f7e-886e-fd84b36c7912"}},{"type":"ITEM","uid":"6cccddf5-f322-4ec6-b2bf-359375dcd3da","data":{"itemId":"4fe526dc-ae2c-4181-ac7d-e8ec6c982906"}},{"type":"ITEM","uid":"0535c363-6868-4db0-bb86-316ad4f67a25","data":{"itemId":"16c70359-ffdb-4c5f-a234-a3486ea7c954"}},{"type":"ITEM","uid":"7d8216c2-1fb4-4e9c-afd1-6e0b25b17c53","data":{"itemId":"0ba8b631-9a7c-4943-ac61-6a8eba69cc41"}},{"type":"ITEM","uid":"54c15c02-e699-401c-aad3-5cc9a4844654","data":{"itemId":"628a94b9-6383-4814-9ef5-988f1fb41585"}},{"type":"ITEM","uid":"c3429f8a-0bb3-4e60-8fdf-14c9a05e1617","data":{"itemId":"629eeb40-dbc6-4ecb-8467-82f78e1c8863"}}]}},"condition":{"type":"CARDINALITY","args":{"nOf":{"min":0,"max":1}}},"action":{"type":"ACCEPT","args":{"score":{"amount":0}}},"avatarIndex":7},"1f819ab2-d81b-4536-bc06-83334926b4b2":{"name":"Обувь","type":"GROUP","template":{"type":"SET","uid":"f8d51531-4524-4dbc-b4b0-499ccc6bf28e","data":{"expressions":[{"type":"ITEM","uid":"cbe52ca8-cc0b-43a8-8af5-d7fd7adec60f","data":{"itemId":"c418f98d-14c6-4228-bb68-d094ca7ea537"}},{"type":"ITEM","uid":"f15ec481-be21-49c9-b6fe-9be5538c3c5a","data":{"itemId":"01f78d7a-218f-4470-9f4a-c4ead65a91ff"}},{"type":"ITEM","uid":"bffe2596-c217-4996-9695-7ce5a8bf6bbd","data":{"itemId":"031d8dfb-8f36-4875-96cd-0b039ea80278"}},{"type":"ITEM","uid":"18e3dec4-6ff2-4df6-9d58-855e7c6bd244","data":{"itemId":"75f4cfd4-7883-495b-a8a9-b8b43c61e844"}},{"type":"ITEM","uid":"97ec1485-2534-4cb7-ac0c-7d5c2fa8a68d","data":{"itemId":"eaa80337-0376-4a8f-b825-a4b9b572e52b"}}]}},"condition":{"type":"CARDINALITY","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"ACCEPT","args":{"score":{"amount":0}}},"avatarIndex":3},"be60dc3a-97b8-4677-a3a0-66bb903ba60d":{"name":"Сумка","type":"GROUP","template":{"type":"SET","uid":"f1cb232a-d678-4fd1-b7ea-a4e4baa5b389","data":{"expressions":[{"type":"ITEM","uid":"22a3dba8-671e-4c04-9d9c-f139df27eda9","data":{"itemId":"1cc0ac02-0d7f-49a2-b8e1-6891ef152c7f"}},{"type":"ITEM","uid":"e7252496-ddf5-410e-ab2f-85e56de11b12","data":{"itemId":"c72f4d7a-5573-4021-9a5a-2e74c7f277ac"}},{"type":"ITEM","uid":"502ba54f-a8d9-4673-ad78-09fdd9667818","data":{"itemId":"2f3a0dd7-2c77-4620-b849-9425051072b0"}},{"type":"ITEM","uid":"a109d74d-13a7-40fa-bc8b-51ff5c945771","data":{"itemId":"a3825a86-d641-4d93-99b2-96c3d7d63a7a"}}]}},"condition":{"type":"CARDINALITY","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"ACCEPT","args":{"score":{"amount":0}}},"avatarIndex":4},"0c40a72d-9519-4d1e-81d2-3b9575f110cd":{"name":"Кольца","type":"GROUP","template":{"type":"SET","uid":"d3b6cf02-2f20-4195-809d-5d4dd68d4586","data":{"expressions":[{"type":"ITEM","uid":"8074283b-af29-4241-8873-5fa551c8160c","data":{"itemId":"4d2e49f6-692c-4c7f-84c0-a992fb633a94"}},{"type":"ITEM","uid":"4b9f83d8-52ea-4082-b3ea-fad8a3d4b3bc","data":{"itemId":"725dfd5c-3897-43a2-9d2f-016a4acd244d"}},{"type":"ITEM","uid":"a6518d85-77c8-426a-9884-fe086588e5ca","data":{"itemId":"90995039-8380-428a-8c89-4674f8e0e855"}},{"type":"ITEM","uid":"8eda2c85-2fd8-4d3b-88fb-b8f4080cf2df","data":{"itemId":"527a27a0-c9cb-44c6-b043-9afaa2434084"}}]}},"condition":{"type":"CARDINALITY","args":{"nOf":{"min":1,"max":2}}},"action":{"type":"ACCEPT","args":{"score":{"amount":0}}},"avatarIndex":9},"221ecf2d-b6b5-4b98-a9aa-7cc257aec63c":{"name":"Score for Блузка","type":"ITEM_SCORE","template":{"type":"SET","uid":"6579eec9-2d84-40ee-846a-deb76287d8ba","data":{"expressions":[{"type":"ITEM","uid":"6b19769f-2c64-48e1-af28-a9262bd8d03e","data":{"itemId":"d346c5b7-6a7c-401a-8380-4f0d9472b402"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":10}}},"avatarIndex":null},"80ad0f25-beb3-49a7-9b15-0cf6167697ef":{"name":"Пиджак нельзя надеть с кардиганом или кофтой","type":"CUSTOM","template":{"type":"SET","uid":"853ab07e-6f4c-40b7-87d8-f2c788fb3ba6","data":{"expressions":[{"type":"ITEM","uid":"80e6e364-5407-4bc6-9c9a-ad33369df80b","data":{"itemId":"38e1012f-bbe5-4167-a832-884b053d978c"}},{"type":"ALTERNATIVE","uid":"f47ee841-ef43-4cc3-921d-c56d325814eb","data":{"expressions":[{"type":"SET","uid":"00bcc636-1a3f-40e2-854c-d35948b0c895","data":{"expressions":[{"type":"ITEM","uid":"af0508ab-4760-4e68-ad0e-62262494c578","data":{"itemId":"e715479a-0157-4be3-90b7-f98b63088db1"}}]}},{"type":"SET","uid":"adc3d134-f3ab-404d-a23e-f8969718f2b8","data":{"expressions":[{"type":"ITEM","uid":"6ce4b1c7-4bb6-47b5-9650-40c4a4d1ebb0","data":{"itemId":"a18ab349-9fa1-492f-a180-e8755ccc8d82"}}]}}]}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"REJECT","args":{"score":{"amount":0}}},"avatarIndex":null},"1828256e-1785-42dc-b0ee-e1e380a8cf3a":{"name":"Нельзя носить 2 из платья, майки, блузки","type":"CUSTOM","template":{"type":"SET","uid":"37c530ec-cd5e-4dcf-aa98-5e5752bcb7e3","data":{"expressions":[{"type":"ITEM","uid":"fa65852f-8969-42ca-8b48-bdddd2cb37a9","data":{"itemId":"adc5860b-de1e-4272-8a48-c919264ccc48"}},{"type":"ITEM","uid":"b53b25f3-4309-4c0e-9d9d-07ca7549d566","data":{"itemId":"48756475-4481-4189-8ced-919a6b11e9b7"}},{"type":"ITEM","uid":"2c5b0756-d6a2-4e38-b0c2-db46cbbec86c","data":{"itemId":"d346c5b7-6a7c-401a-8380-4f0d9472b402"}}]}},"condition":{"type":"CARDINALITY","args":{"nOf":{"min":2,"max":3}}},"action":{"type":"REJECT","args":{"score":{"amount":0}}},"avatarIndex":null},"131a5f0e-864a-4e01-9f1c-017324182409":{"name":"Под платье нельзя надевать ничего из указанного низа","type":"CUSTOM","template":{"type":"SET","uid":"95db58bd-100e-4750-92da-f2d8d482bf7e","data":{"expressions":[{"type":"ITEM","uid":"aacb6f03-58cc-4d82-9ea4-cafd59163a25","data":{"itemId":"48756475-4481-4189-8ced-919a6b11e9b7"}},{"type":"ALTERNATIVE","uid":"e925694b-fb97-4487-b7a6-6c2a04118f5e","data":{"expressions":[{"type":"SET","uid":"a3073cc1-2d75-46aa-a2a3-1e4cace48654","data":{"expressions":[{"type":"ITEM","uid":"40b0753d-5a17-4ca7-b1d7-039b8d1da462","data":{"itemId":"7e59751f-6a18-4f7e-886e-fd84b36c7912"}}]}},{"type":"SET","uid":"e0ec3bd7-7062-4038-9569-0a6359df9314","data":{"expressions":[{"type":"ITEM","uid":"0f7acec4-336e-4de7-9ba8-91f592c1f67e","data":{"itemId":"4fe526dc-ae2c-4181-ac7d-e8ec6c982906"}}]}},{"type":"SET","uid":"f1d1578c-8907-4a39-b7f1-c4d08be17e20","data":{"expressions":[{"type":"ITEM","uid":"abe439d3-6b89-4a5e-a92d-49158616a665","data":{"itemId":"16c70359-ffdb-4c5f-a234-a3486ea7c954"}}]}},{"type":"SET","uid":"dab9b811-d563-45b5-9c98-acff0925eafa","data":{"expressions":[{"type":"ITEM","uid":"d15421f3-cdbc-42d8-b729-1fdda930b446","data":{"itemId":"0ba8b631-9a7c-4943-ac61-6a8eba69cc41"}}]}},{"type":"SET","uid":"c93c69b9-1d1d-4d35-84d8-687957cc1388","data":{"expressions":[{"type":"ITEM","uid":"88fd205f-81ac-4a9e-969d-9a47d4e6d017","data":{"itemId":"628a94b9-6383-4814-9ef5-988f1fb41585"}}]}},{"type":"SET","uid":"fcab7fd2-6152-41af-b451-edd1403bedb6","data":{"expressions":[{"type":"ITEM","uid":"cdd4cc71-0ff4-49f2-b41d-405f6cbb9175","data":{"itemId":"629eeb40-dbc6-4ecb-8467-82f78e1c8863"}}]}}]}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":2,"max":10}}},"action":{"type":"REJECT","args":{"score":{"amount":0}}},"avatarIndex":null},"de8c642c-77e0-4e09-ab79-22e2408b7449":{"name":"Нельзя сочетать разное золото","type":"CUSTOM","template":{"type":"SET","uid":"8d4b7dc0-70bf-43bc-bad6-99d887f5ec1c","data":{"expressions":[{"type":"ITEM","uid":"2609cefe-8d32-4517-8fcb-e21b2538897a","data":{"itemId":"90995039-8380-428a-8c89-4674f8e0e855"}},{"type":"ITEM","uid":"e6d70baa-164d-459d-890c-153c5f251bbf","data":{"itemId":"527a27a0-c9cb-44c6-b043-9afaa2434084"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"REJECT","args":{"score":{"amount":0}}},"avatarIndex":null},"ed196d2f-9500-4356-9d8d-484f5e89a63a":{"name":"Нельзя сочетать серебро и золото","type":"CUSTOM","template":{"type":"SET","uid":"d29054c2-48eb-4be4-8bfc-adfdfbacc7d1","data":{"expressions":[{"type":"ALTERNATIVE","uid":"a0c3d0c6-8c7b-4b27-ab8c-d5cd85988273","data":{"expressions":[{"type":"SET","uid":"4da4a4c5-8a72-43c2-965a-a021318620a2","data":{"expressions":[{"type":"ITEM","uid":"e1762e43-0376-42a6-8f1b-eec58fcfda01","data":{"itemId":"725dfd5c-3897-43a2-9d2f-016a4acd244d"}}]}},{"type":"SET","uid":"3176a369-4fef-4f96-8c33-5c0b1b2079ad","data":{"expressions":[{"type":"ITEM","uid":"1b234d47-7bed-4b70-9619-2739ae492575","data":{"itemId":"4d2e49f6-692c-4c7f-84c0-a992fb633a94"}}]}}]}},{"type":"ALTERNATIVE","uid":"2d6fa3d1-351c-4e28-976e-acff8d14ac59","data":{"expressions":[{"type":"SET","uid":"51264e35-454e-42c1-be40-eca9a68cef9c","data":{"expressions":[{"type":"ITEM","uid":"8dda5be9-3f3a-4f79-8c1e-5c30c9d8aa0a","data":{"itemId":"527a27a0-c9cb-44c6-b043-9afaa2434084"}}]}},{"type":"SET","uid":"5e6584e3-f00f-4d41-b9ad-feff9b726e01","data":{"expressions":[{"type":"ITEM","uid":"a700a00b-998a-4df3-9492-5331126f705d","data":{"itemId":"90995039-8380-428a-8c89-4674f8e0e855"}}]}}]}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"REJECT","args":{"score":{"amount":0}}},"avatarIndex":null},"a60b976c-89b2-4ff9-8df7-64f21054161d":{"name":"Score for Барсетка","type":"ITEM_SCORE","template":{"type":"SET","uid":"208e9a3a-2492-4cd4-868b-24ffef1719ad","data":{"expressions":[{"type":"ITEM","uid":"e4d7856d-7482-4b94-b947-620812a5c742","data":{"itemId":"2f3a0dd7-2c77-4620-b849-9425051072b0"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":-10}}},"avatarIndex":null},"00ddd74b-6ebc-4f1a-ad2d-8f73b11d6491":{"name":"Score for Рюкзак","type":"ITEM_SCORE","template":{"type":"SET","uid":"904cb758-b056-4796-ab91-86d594f89317","data":{"expressions":[{"type":"ITEM","uid":"12bc64cc-f795-4011-86c7-74180cad0d62","data":{"itemId":"c72f4d7a-5573-4021-9a5a-2e74c7f277ac"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":-5}}},"avatarIndex":null},"c5f2924b-0959-46c5-86e7-69f0f83711d1":{"name":"Score for Кроссовки","type":"ITEM_SCORE","template":{"type":"SET","uid":"bc802e14-ad34-41ff-bcf6-57827d52ef6f","data":{"expressions":[{"type":"ITEM","uid":"9e1e677b-22d4-4797-aa42-408c508ee9a7","data":{"itemId":"01f78d7a-218f-4470-9f4a-c4ead65a91ff"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":-5}}},"avatarIndex":null},"1fb7b60d-64a9-40fd-b7b3-bda2a96a3010":{"name":"Score for Туфли на низком каблуке","type":"ITEM_SCORE","template":{"type":"SET","uid":"45ea8411-6549-4cce-a8ab-371f91334271","data":{"expressions":[{"type":"ITEM","uid":"b767a042-6e2d-42c4-8cfe-99fff985998d","data":{"itemId":"031d8dfb-8f36-4875-96cd-0b039ea80278"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":5}}},"avatarIndex":null},"7d855892-97a8-491e-b26f-89c859bf59bd":{"name":"Exclude Спортивки","type":"ITEM_MODE","template":{"type":"SET","uid":"e7423389-ad57-4361-abf9-b6d684952e9a","data":{"expressions":[{"type":"ITEM","uid":"ca61fe04-8145-4675-ad6c-06994aadf5c1","data":{"itemId":"0ba8b631-9a7c-4943-ac61-6a8eba69cc41"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"REJECT","args":{"score":{"amount":0}}},"avatarIndex":null},"86867692-194a-462b-8a00-6dc381a80da0":{"name":"Exclude Шорты","type":"ITEM_MODE","template":{"type":"SET","uid":"cb508017-fd25-4ab6-8e86-25ba16034ef3","data":{"expressions":[{"type":"ITEM","uid":"a39f6039-d47c-4182-8da7-94bded5140fd","data":{"itemId":"4fe526dc-ae2c-4181-ac7d-e8ec6c982906"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"REJECT","args":{"score":{"amount":0}}},"avatarIndex":null},"6932cd18-8a0b-4f38-a03c-69f1cc1843ff":{"name":"Два серебряных кольца красивее выглядят","type":"CUSTOM","template":{"type":"SET","uid":"02de6721-92e6-4de0-83e9-5b5bee8cdd19","data":{"expressions":[{"type":"ITEM","uid":"430038a6-2bc5-4f01-ac6e-1ec6e1beed42","data":{"itemId":"4d2e49f6-692c-4c7f-84c0-a992fb633a94"}},{"type":"ITEM","uid":"09a86cde-b054-40cc-b05e-822a665c40a3","data":{"itemId":"725dfd5c-3897-43a2-9d2f-016a4acd244d"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":5}}},"avatarIndex":null},"53fa21b5-7d41-4e2a-9cf9-2838483d94ae":{"name":"Score for Штаны","type":"ITEM_SCORE","template":{"type":"SET","uid":"f25d91fe-ef8e-48ab-81ff-d314de65b74c","data":{"expressions":[{"type":"ITEM","uid":"b25ca225-4849-4615-9526-bca1fc81adcb","data":{"itemId":"7e59751f-6a18-4f7e-886e-fd84b36c7912"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":5}}},"avatarIndex":null},"26ad256a-bc73-42bc-b848-e4f9166f8281":{"name":"Score for Длинная юбка","type":"ITEM_SCORE","template":{"type":"SET","uid":"7be1b945-fbad-47ff-bbf3-434d3783f3c1","data":{"expressions":[{"type":"ITEM","uid":"ec928473-5f0c-4592-b4b0-77ec886407d9","data":{"itemId":"629eeb40-dbc6-4ecb-8467-82f78e1c8863"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":4}}},"avatarIndex":null},"1a46829f-b4ad-47da-bb92-50f794180fc1":{"name":"Score for серебряное без камня","type":"ITEM_SCORE","template":{"type":"SET","uid":"e3fa3496-5ead-4231-ac21-f866d10820f4","data":{"expressions":[{"type":"ITEM","uid":"6f56e323-a1ce-4ec5-991b-a07711f05a51","data":{"itemId":"725dfd5c-3897-43a2-9d2f-016a4acd244d"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":5}}},"avatarIndex":null},"7e08cb72-ba01-4b96-985c-37924a257b5f":{"name":"Score for Пиджак","type":"ITEM_SCORE","template":{"type":"SET","uid":"e0f8d59a-af24-4b33-ac7e-88d9f379e236","data":{"expressions":[{"type":"ITEM","uid":"42362315-0ca8-4bf7-b9a6-ca19fe4bb58d","data":{"itemId":"38e1012f-bbe5-4167-a832-884b053d978c"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":7}}},"avatarIndex":null},"68671242-12cc-43ae-9597-c3925d1979ae":{"name":"Score for Сумочка","type":"ITEM_SCORE","template":{"type":"SET","uid":"e6ad621a-eda1-4432-a8fb-f92a9596bbcf","data":{"expressions":[{"type":"ITEM","uid":"5274d587-79f9-49c9-804a-ac64e5c6eedf","data":{"itemId":"a3825a86-d641-4d93-99b2-96c3d7d63a7a"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":6}}},"avatarIndex":null},"3a6f46f8-37c7-4db0-a995-42966cd287c6":{"name":"Score for Клатч","type":"ITEM_SCORE","template":{"type":"SET","uid":"d850ddcd-4cdd-449b-b08f-8e3cbb800d26","data":{"expressions":[{"type":"ITEM","uid":"fe54ddd3-40ea-40dd-a9ed-d0d37c10be3a","data":{"itemId":"1cc0ac02-0d7f-49a2-b8e1-6891ef152c7f"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":5}}},"avatarIndex":null}},"creationOrder":["62475b57-9745-4327-a1c3-4ec4b8acb7e7","6ea2f31d-444f-4287-bbe6-2fcc73dec22b","1f819ab2-d81b-4536-bc06-83334926b4b2","be60dc3a-97b8-4677-a3a0-66bb903ba60d","0c40a72d-9519-4d1e-81d2-3b9575f110cd","221ecf2d-b6b5-4b98-a9aa-7cc257aec63c","80ad0f25-beb3-49a7-9b15-0cf6167697ef","1828256e-1785-42dc-b0ee-e1e380a8cf3a","131a5f0e-864a-4e01-9f1c-017324182409","de8c642c-77e0-4e09-ab79-22e2408b7449","ed196d2f-9500-4356-9d8d-484f5e89a63a","a60b976c-89b2-4ff9-8df7-64f21054161d","00ddd74b-6ebc-4f1a-ad2d-8f73b11d6491","c5f2924b-0959-46c5-86e7-69f0f83711d1","1fb7b60d-64a9-40fd-b7b3-bda2a96a3010","7d855892-97a8-491e-b26f-89c859bf59bd","86867692-194a-462b-8a00-6dc381a80da0","6932cd18-8a0b-4f38-a03c-69f1cc1843ff","53fa21b5-7d41-4e2a-9cf9-2838483d94ae","26ad256a-bc73-42bc-b848-e4f9166f8281","1a46829f-b4ad-47da-bb92-50f794180fc1","7e08cb72-ba01-4b96-985c-37924a257b5f","68671242-12cc-43ae-9597-c3925d1979ae","3a6f46f8-37c7-4db0-a995-42966cd287c6"],"groupsCounter":9}}')},"26eb":function(e){e.exports=JSON.parse('{"version":2,"items":{"items":{"c0c73148-3b03-465f-9d55-f73dc61d58b2":{"text":"Внутреннего сгорания"},"09c68503-1521-4d71-9d6c-4318cf77b54d":{"text":"воздушный винт\\t"},"1d256ce8-c62c-4c8c-8655-7bc858438a8e":{"text":"на снег"},"8f5c03cf-cb6c-430a-aeb9-d675823da003":{"text":"Газовая турбина"},"6ababef5-3e50-4e50-a953-264ef86e6c4b":{"text":"Электродвигатель"},"5ca5d478-3062-4630-89d9-cbe8b489cbaf":{"text":"Реактивный двигатель"},"d5b7a041-9990-4480-81b2-3c7dc13b5c9f":{"text":"гусеницы"},"f38ecdd2-0e3e-4f4e-a37c-3f84839dca07":{"text":"лыжи"},"302715b6-4f6a-45c3-affe-91b0d2a8da9c":{"text":"снегомёт"},"eda5ebae-1ea2-460d-acdb-15e026d62824":{"text":"шнеки"},"a73f574c-81ef-4ab1-bb26-06f4e161ba6d":{"text":"на двигатель"},"539d1908-9668-439c-87ba-c33c85c59fa4":{"text":"на движитель"}}},"rules":{"rules":{"fc7f0012-2808-4933-be0b-28e8838c50a8":{"name":"Двигатель","type":"GROUP","template":{"type":"SET","uid":"025b36a5-bb98-4dd2-958e-79ce2c84a306","data":{"expressions":[{"type":"ITEM","uid":"a40e2b48-8ec8-4fcd-a571-aef0b7cd52c5","data":{"itemId":"c0c73148-3b03-465f-9d55-f73dc61d58b2"}},{"type":"ITEM","uid":"7ead0fdc-83d6-4bb4-9775-df48d22a1b02","data":{"itemId":"8f5c03cf-cb6c-430a-aeb9-d675823da003"}},{"type":"ITEM","uid":"d365e353-9f62-4c3e-b718-06302fc40634","data":{"itemId":"6ababef5-3e50-4e50-a953-264ef86e6c4b"}},{"type":"ITEM","uid":"5cf7867b-b430-449c-a830-9db23190a5fe","data":{"itemId":"5ca5d478-3062-4630-89d9-cbe8b489cbaf"}}]}},"condition":{"type":"CARDINALITY","args":{"nOf":{"min":1,"max":2}}},"action":{"type":"ACCEPT","args":{"score":{"amount":0}}},"avatarIndex":1},"7722a83e-94a0-4864-a263-d1207a888e10":{"name":"Движитель","type":"GROUP","template":{"type":"SET","uid":"7e39c76d-4a4d-4aa8-a9ee-dd51ebbe1490","data":{"expressions":[{"type":"ITEM","uid":"2d997b9c-bdd8-4440-974d-42c03004ec41","data":{"itemId":"09c68503-1521-4d71-9d6c-4318cf77b54d"}},{"type":"ITEM","uid":"e7c42f30-8bad-4fd3-bc02-1c2bfbe42031","data":{"itemId":"d5b7a041-9990-4480-81b2-3c7dc13b5c9f"}},{"type":"ITEM","uid":"ecebdc66-9d69-4990-9a8f-3f9eced8137e","data":{"itemId":"f38ecdd2-0e3e-4f4e-a37c-3f84839dca07"}},{"type":"ITEM","uid":"1df3886c-0119-4a06-8382-803bf24bedf8","data":{"itemId":"302715b6-4f6a-45c3-affe-91b0d2a8da9c"}},{"type":"ITEM","uid":"47ba331d-0bae-436e-bdb5-f17c547b76fc","data":{"itemId":"eda5ebae-1ea2-460d-acdb-15e026d62824"}}]}},"condition":{"type":"CARDINALITY","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"ACCEPT","args":{"score":{"amount":0}}},"avatarIndex":2},"21965239-5da9-4909-b859-f089314d0ac9":{"name":"Опора ","type":"GROUP","template":{"type":"SET","uid":"4c9dc0b7-7b84-47ef-9383-211cb0946bfe","data":{"expressions":[{"type":"ITEM","uid":"08d8f69f-16a1-4557-b2e4-57fd33512a49","data":{"itemId":"1d256ce8-c62c-4c8c-8655-7bc858438a8e"}},{"type":"ITEM","uid":"401383d5-e29d-45cf-9ae9-8d72a3aa8706","data":{"itemId":"a73f574c-81ef-4ab1-bb26-06f4e161ba6d"}},{"type":"ITEM","uid":"c7991183-420e-4330-b713-84c1c2241f18","data":{"itemId":"539d1908-9668-439c-87ba-c33c85c59fa4"}}]}},"condition":{"type":"CARDINALITY","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"ACCEPT","args":{"score":{"amount":0}}},"avatarIndex":3},"1f4cbb2d-4b48-4efc-b4cd-f76a845e7014":{"name":"Require лыжи","type":"ITEM_MODE","template":{"type":"SET","uid":"f4f2f12b-1c5a-4f4a-8445-66675097fc0a","data":{"expressions":[{"type":"ITEM","uid":"dbf4fc63-bae8-4bc2-ac40-01a10cb80f76","data":{"itemId":"f38ecdd2-0e3e-4f4e-a37c-3f84839dca07"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"ACCEPT","args":{"score":{"amount":0}}},"avatarIndex":null},"61e5bad0-ef88-4cf2-ab53-80dacfcff762":{"name":"Exclude на снег","type":"ITEM_MODE","template":{"type":"SET","uid":"c233e550-872b-49ae-b1d4-65d9c8b42f88","data":{"expressions":[{"type":"ITEM","uid":"4a89e5e1-bfd1-4532-8f9a-2ea2d94dcf0f","data":{"itemId":"1d256ce8-c62c-4c8c-8655-7bc858438a8e"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"REJECT","args":{"score":{"amount":0}}},"avatarIndex":null},"41f4c6f8-f658-4def-8c6d-b62aaced95cb":{"name":"Score for Электродвигатель","type":"ITEM_SCORE","template":{"type":"SET","uid":"ca706986-b530-4e70-98f3-818f85e27eb9","data":{"expressions":[{"type":"ITEM","uid":"072981ad-06be-4d65-a612-67640c4a87a0","data":{"itemId":"6ababef5-3e50-4e50-a953-264ef86e6c4b"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":null}}},"avatarIndex":null},"537910b9-da35-457d-ac44-e9c639a1afd3":{"name":"Score for Реактивный двигатель","type":"ITEM_SCORE","template":{"type":"SET","uid":"bdd33717-f142-4092-b152-b2093963de53","data":{"expressions":[{"type":"ITEM","uid":"fbaf12e7-91b1-400e-baeb-96c4805752fe","data":{"itemId":"5ca5d478-3062-4630-89d9-cbe8b489cbaf"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":1}}},"avatarIndex":null},"a6785b4e-fc41-43f3-8149-18a08f5aa41f":{"name":"Score for Газовая турбина","type":"ITEM_SCORE","template":{"type":"SET","uid":"b10a8207-4b7c-40af-ba51-c5bfc823c077","data":{"expressions":[{"type":"ITEM","uid":"4f1a1043-9dc1-48f4-bfe2-ae6b6b85b9c3","data":{"itemId":"8f5c03cf-cb6c-430a-aeb9-d675823da003"}}]}},"condition":{"type":"ALL_OF","args":{"nOf":{"min":1,"max":1}}},"action":{"type":"SCORE","args":{"score":{"amount":1}}},"avatarIndex":null}},"creationOrder":["fc7f0012-2808-4933-be0b-28e8838c50a8","7722a83e-94a0-4864-a263-d1207a888e10","21965239-5da9-4909-b859-f089314d0ac9","1f4cbb2d-4b48-4efc-b4cd-f76a845e7014","61e5bad0-ef88-4cf2-ab53-80dacfcff762","41f4c6f8-f658-4def-8c6d-b62aaced95cb","537910b9-da35-457d-ac44-e9c639a1afd3","a6785b4e-fc41-43f3-8149-18a08f5aa41f"],"groupsCounter":3}}')},"3d4a":function(e,t,a){"use strict";var o=a("b139"),n=a.n(o);n.a},"3f2e":function(e,t,a){},"561c":function(e,t,a){e.exports=a.p+"img/rule_template_example.bbfc6578.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("a026"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:"",dense:"",flat:""}},[a("v-toolbar-title",[e._v(" Morphology ")]),a("v-toolbar-title",{staticClass:"ml-8"},[e._v(" Телеграм: "),a("a",{staticClass:"white--text",attrs:{href:"https://t.me/joinchat/HA7ACB09k1-CXOuSSog4Vg"}},[e._v("@Morphology")])])],1),a("v-content",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"2"}},[a("morphology-main-panel")],1),a("v-col",{attrs:{cols:"10"}},[a("v-row",[a("v-col",[a("v-toolbar",{attrs:{flat:""}},[a("v-btn-toggle",[a("v-btn",{attrs:{color:"primary",outlined:"",to:"/"}},[e._v("Groups")]),a("v-btn",{attrs:{color:"primary",outlined:"",to:"/rules"}},[e._v(" Rules — "+e._s(e.totalRules)+" ")]),a("v-btn",{attrs:{color:"primary",outlined:"",to:"/solutions"}},[e._v(" Solutions — "+e._s(e.totalSolutions)+" ")]),a("v-btn",{attrs:{color:"primary",outlined:"",to:"/advices"}},[e._v(" Advices — "+e._s(e.visibleAdvices)+" / "+e._s(e.totalAdvices)+" ")])],1),a("v-spacer"),a("morphology-help",{staticClass:"ml-1"}),a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({staticClass:"ml-1",attrs:{color:"warning"}},o),[e._v(" Examples "),a("v-icon",{attrs:{right:""}},[e._v("mdi-chevron-down")])],1)]}}])},[a("v-list",e._l(e.examples,(function(t,o){return a("v-list-item",{key:o,on:{click:function(a){return e.loadExample(t)}}},[a("v-list-item-title",[e._v(e._s(t.name))])],1)})),1)],1),a("v-btn",{staticClass:"ml-1",attrs:{color:"success"},on:{click:e.onExport}},[e._v("Export")]),a("input",{staticClass:"d-none",attrs:{type:"file",id:"morphology-import-file"},on:{change:e.onImportFileSelect}}),a("v-btn",{staticClass:"ml-1",attrs:{color:"primary"},on:{click:e.onImport}},[e._v("Import")]),a("v-btn",{staticClass:"ml-1",attrs:{color:"error"},on:{click:e.onClear}},[e._v("Clear")])],1)],1)],1),a("router-view")],1)],1)],1)],1)],1)},i=[],r=(a("b0c0"),a("ec26")),s=a("21a6"),c=a("4124"),l=a.n(c),d=(a("4160"),a("c975"),a("159b"),a("2909")),u=a("b85c"),p=a("d4ec"),f=a("bee2"),m=(a("99af"),a("a434"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),new l.a({ITEM:0,SET:1,ALTERNATIVE:2},{name:"EXPRESSION_TYPE",freeze:!0})),v={};function h(e){var t=e.itemId;return{type:m.ITEM.key,uid:r["a"](),data:{itemId:t}}}function b(){return{type:m.SET.key,uid:r["a"](),data:{expressions:[]}}}function y(){return{type:m.ALTERNATIVE.key,uid:r["a"](),data:{expressions:[]}}}function g(e){var t=e.root,a=e.child;if(!m.SET.is(t.type)&&!m.ALTERNATIVE.is(t.type))throw"Can not add expression: wrong type of root expression ".concat(t.type);t.data.expressions.push(a)}function I(e){var t=e.expression,a=e.uid;if(!m.SET.is(t.type)&&!m.ALTERNATIVE.is(t.type))throw"Wrong expression type";var o=null;for(var n in t.data.expressions)if(t.data.expressions[n].uid==a){o=n;break}if(null==o)throw'Can not find subexpression "'.concat(a,'"');return o}function x(e){var t=e.expression,a=e.uid,o=e.newExpression;if(!m.SET.is(t.type)&&!m.ALTERNATIVE.is(t.type))throw"Can not add expression: wrong type of root expression ".concat(root.type);var n=I({expression:t,uid:a});t.data.expressions.splice(n,1,o)}function _(e){var t=e.expression,a=e.uid;if(!m.SET.is(t.type)&&!m.ALTERNATIVE.is(t.type))return!1;var o=null;for(var n in t.data.expressions)if(t.data.expressions[n].uid==a){o=n;break}return null!=o&&(t.data.expressions.splice(o,1),!0)}function E(e){var t=e.expression;if(m.ITEM.is(t.type))return!1;if(m.SET.is(t.type))for(var a in t.data.expressions){var o,n=t.data.expressions[a];if(S(n))return _({expression:t,uid:n.uid}),!0;if(m.SET.is(n.type))return(o=t.data.expressions).splice.apply(o,[a,1].concat(Object(d["a"])(n.data.expressions))),!0}if(m.ALTERNATIVE.is(t.type))for(var i in t.data.expressions){var r,s=t.data.expressions[i];if(S(s))return _({expression:t,uid:s.uid}),!0;if(m.ALTERNATIVE.is(s.type))return(r=t.data.expressions).splice.apply(r,[i,1].concat(Object(d["a"])(s.data.expressions))),!0}return!(!m.ALTERNATIVE.is(t.type)||1!=t.data.expressions.length)&&(Object.assign(t,t.data.expressions[0]),!0)}function S(e){return!m.ITEM.is(e.type)&&((m.SET.is(e.type)||!!m.ALTERNATIVE.is(e.type))&&0==e.data.expressions.length)}function T(e){var t=e.expression,a=e.uid;if(_({expression:t,uid:a}))return!0;if(m.ITEM.is(t.type))return!1;if(m.SET.is(t.type)){for(var o in t.data.expressions)if(T({expression:t.data.expressions[o],uid:a}))return!0;return!1}if(m.ALTERNATIVE.is(t.type)){for(var n in t.data.expressions)if(T({expression:t.data.expressions[n],uid:a}))return!0;return!1}return!1}function C(e){var t=e.expression;if(E({expression:t}))return!0;if(m.ITEM.is(t.type))return!1;if(m.SET.is(t.type)){for(var a in t.data.expressions)if(C({expression:t.data.expressions[a]}))return!0;return!1}if(m.ALTERNATIVE.is(t.type)){for(var o in t.data.expressions)if(C({expression:t.data.expressions[o]}))return!0;return!1}return!1}function O(e){var t=e.expression,a=e.uid;T({expression:t,uid:a});while(C({expression:t}));}function M(e){var t=e.expression,a=e.itemId;return null!=A({expression:t,itemId:a})}function A(e){var t=e.expression,a=e.itemId;if(m.ITEM.is(t.type))return t.data.itemId==a?t.uid:null;if(m.SET.is(t.type)){for(var o in t.data.expressions){var n=A({expression:t.data.expressions[o],itemId:a});if(null!=n)return n}return null}if(m.ALTERNATIVE.is(t.type)){for(var i in t.data.expressions){var r=A({expression:t.data.expressions[i],itemId:a});if(null!=r)return r}return null}return null}function R(e){var t=e.expression;if(m.ITEM.is(t.type))return new Set([t.data.itemId]);if(m.SET.is(t.type)){var a=new Set;for(var o in t.data.expressions){var n,i=Object(u["a"])(R({expression:t.data.expressions[o]}).values());try{for(i.s();!(n=i.n()).done;){var r=n.value;a.add(r)}}catch(f){i.e(f)}finally{i.f()}}return a}if(m.ALTERNATIVE.is(t.type)){var s=new Set;for(var c in t.data.expressions){var l,d=Object(u["a"])(R({expression:t.data.expressions[c]}).values());try{for(d.s();!(l=d.n()).done;){var p=l.value;s.add(p)}}catch(f){d.e(f)}finally{d.f()}}return s}return new Set}function w(e){var t=e.items,a=b();for(var o in t){var n=h({itemId:t[o]});g({root:a,child:n})}return a}function k(e){var t=e.expression;if(m.ITEM.is(t.type))return 1;if(m.SET.is(t.type)){var a=1;for(var o in t.data.expressions)a*=k({expression:t.data.expressions[o]});return a}if(m.ALTERNATIVE.is(t.type)){var n=0;for(var i in t.data.expressions)n+=k({expression:t.data.expressions[i]});return n}return[]}function V(e){if(m.ITEM.is(e.type))return[new Set([e.data.itemId])];if(m.SET.is(e.type)){var t=[new Set];for(var a in e.data.expressions){var o=V(e.data.expressions[a]),n=[];for(var i in t)for(var r in o)n.push(new Set([].concat(Object(d["a"])(t[i]),Object(d["a"])(o[r]))));t=n}return t}if(m.ALTERNATIVE.is(e.type)){var s=[];for(var c in e.data.expressions)s.push.apply(s,Object(d["a"])(V(e.data.expressions[c])));return s}}v[m.ITEM]={},v[m.SET]={},v[m.ALTERNATIVE]={};var L=new l.a({CUSTOM:0,ITEM_MODE:1,GROUP:2,ITEM_SCORE:1},{name:"RULE_TYPE",freeze:!0}),$={};$[L.CUSTOM]={text:"Custom"},$[L.ITEM_MODE]={text:"Item Mode"},$[L.GROUP]={text:"Group"},$[L.ITEM_SCORE]={text:"Item Score"};var N=new l.a({ACCEPT:0,REJECT:1,SCORE:2},{name:"ACTION_TYPE",freeze:!0}),D={};D[N.ACCEPT]={text:"Accept solution"},D[N.REJECT]={text:"Reject solution"},D[N.SCORE]={text:"Change solution score at"};var j=new l.a({ALL_OF:0,NONE_OF:1,CARDINALITY:2},{name:"CONDITION_TYPE",freeze:!0}),F={};function P(e,t){var a=[],o=[];for(var n in e.enums){var i=e.enums[n];a.push(i.key),o.push({value:i.key,text:t[i].text})}return{types:a,infos:o}}function U(e){j.CARDINALITY.is(e.condition.type)&&(e.condition.args.nOf.min=Math.min(e.condition.args.nOf.min,R({expression:e.template}).size),e.condition.args.nOf.max=Math.min(e.condition.args.nOf.max,R({expression:e.template}).size))}function B(e){var t=e.name||"",a=b();e.template&&(a=e.template);var o=e.condition;o||(o={type:j.ALL_OF.key,args:{nOf:{min:1,max:1}}});var n=e.action;n||(n={type:N.ACCEPT.key,args:{score:{amount:0}}});var i={name:t,type:e.type.key,template:a,condition:o,action:n,avatarIndex:null};return i}function G(e,t){for(var a in t)e[a]=t[a]}function H(e,t,a){for(var o in e){var n=e[o];if(M({expression:n.template,itemId:a})&&t.is(n.type))return o}return null}function Y(e,t){var a=[];return t.forEach((function(t){-1!=e.indexOf(t)&&a.push(t)})),a}function J(e,t,a,o){for(var n in o){for(var i=o[n],r=0,s=e.length,c=0;c<s;c++)-1!=i.indexOf(e[c])&&r++;if(t<=r&&r<=a)return!0}return!1}function z(e,t){for(var a in t){for(var o=t[a],n=o.length,i=!0,r=0;r<n;r++)if(-1!=e.indexOf(o[r])){i=!1;break}if(i)return!0}return!1}function X(e,t){for(var a in t){for(var o=t[a],n=o.length,i=!0,r=0;r<n;r++)if(-1==e.indexOf(o[r])){i=!1;break}if(i)return!0}return!1}F[j.ALL_OF]={text:"All of items"},F[j.NONE_OF]={text:"None of items"},F[j.CARDINALITY]={text:"N of items"};var Q=function(){function e(t,a,o,n){Object(p["a"])(this,e),this.ruleId=t,this.template=a,this.condition=o,this.action=n,this.setsCache=[];var i,r=Object(u["a"])(V(this.template));try{for(r.s();!(i=r.n()).done;){var s=i.value,c=Object(d["a"])(s);c.sort(),this.setsCache.push(c)}}catch(l){r.e(l)}finally{r.f()}}return Object(f["a"])(e,[{key:"conditionAnswer",value:function(e){if(j.ALL_OF.is(this.condition.type))return X(e,this.setsCache);if(j.NONE_OF.is(this.condition.type))return z(e,this.setsCache);if(j.CARDINALITY.is(this.condition.type)){var t=this.condition.args.nOf;return J(e,t.min,t.max,this.setsCache)}}},{key:"checkUpper",value:function(e){return!!N.SCORE.is(this.action.type)||(!!N.ACCEPT.is(this.action.type)||(N.REJECT.is(this.action.type)?!this.conditionAnswer(e.items):void 0))}},{key:"checkLower",value:function(e){return!!N.SCORE.is(this.action.type)||(N.ACCEPT.is(this.action.type)?this.conditionAnswer(e.items):N.REJECT.is(this.action.type)?!this.conditionAnswer(e.items):void 0)}},{key:"score",value:function(e){return N.SCORE.is(this.action.type)&&this.conditionAnswer(e)?this.action.args.score.amount:0}}]),e}();function q(e,t){return[new Q(e,t.template,t.condition,t.action)]}var Z=new l.a({OPTIONAL:0,REQUIRED:1,EXCLUDED:2},{name:"ITEM_MODE",freez:!0}),W=[];function K(e){return N.ACCEPT.is(e.action.type)?Z.REQUIRED:N.REJECT.is(e.action.type)?Z.EXCLUDED:Z.OPTIONAL}function ee(e,t){return Z.REQUIRED.is(t)?"Require ".concat(e.text):Z.EXCLUDED.is(t)?"Exclude ".concat(e.text):null}function te(e){return"Score for ".concat(e.text)}W[Z.OPTIONAL]={name:"Optional"},W[Z.REQUIRED]={name:"Required"},W[Z.EXCLUDED]={name:"Excluded"};var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{attrs:{cols:"3"}},[a("v-card",{attrs:{elevation:"1"}},[a("morphology-editable-toolbar",{attrs:{changeCaption:e.changeCaption,caption:e.rule.name,emptyFiller:"Enter caption"},scopedSlots:e._u([{key:"before_title",fn:function(){return[a("v-btn",{attrs:{icon:""}},[a("morphology-rule-avatar",{attrs:{avatar:e.avatar}})],1)]},proxy:!0},{key:"before_edit_button",fn:function(){return[a("morphology-rule-cardinality",{attrs:{"rule-id":e.ruleId}})]},proxy:!0},{key:"after_edit_button",fn:function(){return[a("v-btn",{attrs:{icon:""},on:{click:e.remove}},[a("v-icon",[e._v("mdi-delete")])],1)]},proxy:!0}])}),e._l(e.items,(function(e){return a("morphology-item",{key:e,attrs:{"item-id":e}})})),a("v-card-actions",[a("v-btn",{attrs:{block:"",small:"",color:"primary"},on:{click:e.createItem}},[e._v("Add item")])],1)],2)],1)},oe=[],ne=["red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","blue-grey","grey"];function ie(e){return{color:ne[e%ne.length],uid:e}}var re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-toolbar",{attrs:{flat:"",dense:"",color:e.backgroundColor}},[a("morphology-switch",{attrs:{modes:["edit","show"]},scopedSlots:e._u([{key:"edit",fn:function(){return[a("v-text-field",{attrs:{autofocus:"",dense:"","single-line":"",value:e.caption},on:{blur:function(t){e.captionMode="show"},change:e.confirmCaptionChange}})]},proxy:!0},{key:"show",fn:function(){return[e._t("before_title"),e.caption?a("v-toolbar-title",[e._v(" "+e._s(e.caption)+" ")]):a("v-toolbar-title",{staticClass:"font-weight-light"},[e._v(" "+e._s(e.emptyFiller)+" ")]),a("v-spacer"),e._t("before_edit_button"),e.allowEdit?a("v-btn",{attrs:{icon:""},on:{click:function(t){e.captionMode="edit"}}},[a("v-icon",[e._v("mdi-lead-pencil")])],1):e._e(),e._t("after_edit_button")]},proxy:!0}],null,!0),model:{value:e.captionMode,callback:function(t){e.captionMode=t},expression:"captionMode"}})],1)},se=[],ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fragment",[e._l(e.modes,(function(t){return[e.currentMode==t?e._t(t):e._e()]}))],2)},le=[],de=a("3f08"),ue={name:"MorphologySwitch",components:{Fragment:de["a"]},data:function(){return{}},model:{prop:"currentMode",event:"changeCurrentMode"},props:["modes","currentMode"],computed:{},methods:{}},pe=ue,fe=a("2877"),me=Object(fe["a"])(pe,ce,le,!1,null,null,null),ve=me.exports,he={name:"MorphologyEditableToolbar",components:{MorphologySwitch:ve},data:function(){return{captionMode:"show"}},props:{emptyFiller:String,caption:String,changeCaption:Function,allowEdit:{type:Boolean,default:!0}},computed:{backgroundColor:function(){return this.allowEdit?"light-blue lighten-4":"grey lighten-4"}},methods:{confirmCaptionChange:function(e){this.allowEdit&&(this.changeCaption(e),this.captionMode="show",this.$gtag.event("change_caption",{event_label:e}))}}},be=he,ye=a("6544"),ge=a.n(ye),Ie=a("8336"),xe=a("132d"),_e=a("2fa4"),Ee=a("8654"),Se=a("71d9"),Te=a("2a7f"),Ce=Object(fe["a"])(be,re,se,!1,null,null,null),Oe=Ce.exports;ge()(Ce,{VBtn:Ie["a"],VIcon:xe["a"],VSpacer:_e["a"],VTextField:Ee["a"],VToolbar:Se["a"],VToolbarTitle:Te["a"]});var Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list-item",{class:e.itemClasses},[a("morphology-switch",{attrs:{modes:["edit","show"]},scopedSlots:e._u([{key:"edit",fn:function(){return[a("v-list-item-content",[a("v-text-field",{attrs:{label:"item text",autofocus:"",dense:"","single-line":"",value:e.item.text},on:{blur:function(t){e.captionMode="show"},change:e.confirmCaptionChange}})],1)]},proxy:!0},{key:"show",fn:function(){return[a("v-list-item-content",[e.item.text?a("v-list-item-title",{class:e.itemTextClasses},[e._v(" "+e._s(e.item.text)+" ")]):a("v-list-item-title",[e._v("Enter description")]),a("v-list-item-subtitle",[a("morphology-item-score",{attrs:{"item-id":e.itemId,textClasses:e.itemTextClasses}})],1)],1),a("v-list-item-action",[a("morphology-item-mode",{attrs:{"item-id":e.itemId}})],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(t){e.captionMode="edit"}}},[a("v-icon",[e._v("mdi-lead-pencil")])],1)],1),a("v-list-item-action",{staticClass:"ml-0"},[a("v-btn",{attrs:{icon:"","x-small":""},on:{click:e.remove}},[a("v-icon",[e._v("mdi-close")])],1)],1)]},proxy:!0}]),model:{value:e.captionMode,callback:function(t){e.captionMode=t},expression:"captionMode"}})],1)},Ae=[],Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({attrs:{icon:"","x-small":""}},o),[a("v-icon",[e._v("mdi-state-machine")])],1)]}}])},[a("v-list",e._l(e.itemModes,(function(t){return a("v-list-item",{key:t.key,on:{click:function(a){return e.changeMode(t)}}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-capitalize"},[e._v(e._s(t))])],1)],1)})),1)],1)},we=[],ke={name:"MorphologyItemMode",data:function(){return{}},props:["itemId"],computed:{item:function(){return this.$store.getters["items/activeItems"][this.itemId]},ruleId:function(){return this.$store.getters["rules/ruleIdForTypeAndItem"](L.ITEM_MODE,this.itemId)},itemModes:function(){return Z.enums}},methods:{changeMode:function(e){var t=null,a=ee(this.item,e);Z.OPTIONAL.is(e),Z.REQUIRED.is(e)&&(t=B({type:L.ITEM_MODE,template:w({items:[this.itemId]}),name:a}),t.action.type=N.ACCEPT.key),Z.EXCLUDED.is(e)&&(t=B({type:L.ITEM_MODE,template:w({items:[this.itemId]}),name:a}),t.action.type=N.REJECT.key),null!=t||null==this.ruleId?null!=t&&(this.$store.dispatch("setRule",{ruleId:this.ruleId||r["a"](),rule:t}),this.$gtag.event("change_item_mode",{event_label:this.item.text,event_category:e.key})):this.$store.dispatch("removeRule",{ruleId:this.ruleId})}}},Ve=ke,Le=a("8860"),$e=a("da13"),Ne=a("5d23"),De=a("e449"),je=Object(fe["a"])(Ve,Re,we,!1,null,null,null),Fe=je.exports;ge()(je,{VBtn:Ie["a"],VIcon:xe["a"],VList:Le["a"],VListItem:$e["a"],VListItemContent:Ne["b"],VListItemTitle:Ne["d"],VMenu:De["a"]});var Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("morphology-switch",{attrs:{modes:["x","show"]},scopedSlots:e._u([{key:"x",fn:function(){return[a("v-text-field",{attrs:{label:"score",autofocus:"",dense:"","single-line":"",value:e.score},on:{blur:function(t){e.scoreMode="show"},change:e.confirmScoreChange}})]},proxy:!0},{key:"show",fn:function(){return[a("v-btn",{class:e.textClasses,attrs:{text:"","x-small":""},on:{click:function(t){e.scoreMode="x"}}},[0==e.score?[e._v("no score")]:[e._v("score "+e._s(e.score))]],2)]},proxy:!0}]),model:{value:e.scoreMode,callback:function(t){e.scoreMode=t},expression:"scoreMode"}})},Ue=[],Be={name:"MorphologyItemScore",components:{Fragment:de["a"],MorphologySwitch:ve},data:function(){return{scoreMode:"show"}},props:["itemId","textClasses"],computed:{item:function(){return this.$store.getters["items/activeItems"][this.itemId]},ruleId:function(){return this.$store.getters["rules/ruleIdForTypeAndItem"](L.ITEM_SCORE,this.itemId)},score:function(){if(null==this.ruleId)return 0;var e=this.$store.getters["rules/activeRules"][this.ruleId];return e.action.args.score.amount}},methods:{confirmScoreChange:function(e){this.scoreMode="show";var t=null,a=parseInt(e),o=te(this.item);0==a||(t=B({type:L.ITEM_SCORE,template:w({items:[this.itemId]}),action:{type:N.SCORE.key,args:{score:{amount:a}}},name:o})),null!=t||null==this.ruleId?null!=t&&(this.$store.dispatch("setRule",{ruleId:this.ruleId||r["a"](),rule:t}),this.$gtag.event("change_item_score",{event_label:this.item.text})):this.$store.dispatch("removeRule",{ruleId:this.ruleId})}}},Ge=Be,He=Object(fe["a"])(Ge,Pe,Ue,!1,null,null,null),Ye=He.exports;ge()(He,{VBtn:Ie["a"],VTextField:Ee["a"]});var Je={name:"MorphologyItem",components:{MorphologySwitch:ve,MorphologyItemMode:Fe,MorphologyItemScore:Ye},data:function(){return{captionMode:"show"}},props:["itemId"],computed:{item:function(){return this.$store.getters["items/activeItems"][this.itemId]},itemModeRuleId:function(){return this.$store.getters["rules/ruleIdForTypeAndItem"](L.ITEM_MODE,this.itemId)},itemScoreRuleId:function(){return this.$store.getters["rules/ruleIdForTypeAndItem"](L.ITEM_SCORE,this.itemId)},itemTextClasses:function(){if(null==this.itemModeRuleId)return"";var e=this.$store.getters["rules/ruleById"](this.itemModeRuleId),t=K(e);return Z.OPTIONAL.is(t)?"":Z.REQUIRED.is(t)?"success--text font-weight-medium":Z.EXCLUDED.is(t)?"warning--text font-weight-medium":""},partOfBestSolution:function(){var e=this.$store.getters["solutions/bestSolutionItems"];return null!=e&&-1!=e.indexOf(this.itemId)},itemClasses:function(){return this.partOfBestSolution?"light-blue lighten-5":""}},methods:{confirmCaptionChange:function(e){if(this.$store.commit("items/changeItemText",{itemId:this.itemId,text:e}),this.itemModeRuleId){var t=this.$store.getters["rules/ruleById"](this.itemModeRuleId),a=K(t);this.$store.commit("rules/changeRuleName",{ruleId:this.itemModeRuleId,name:ee(this.item,a)})}if(this.itemScoreRuleId){this.$store.getters["rules/ruleById"](this.itemScoreRuleId);this.$store.commit("rules/changeRuleName",{ruleId:this.itemScoreRuleId,name:te(this.item)})}this.captionMode="show",this.$gtag.event("change_caption_item",{event_label:e})},remove:function(){this.$gtag.event("remove_item",{event_label:this.item.text}),this.$store.dispatch("removeItem",{itemId:this.itemId})}}},ze=Je,Xe=a("1800"),Qe=Object(fe["a"])(ze,Me,Ae,!1,null,null,null),qe=Qe.exports;ge()(Qe,{VBtn:Ie["a"],VIcon:xe["a"],VListItem:$e["a"],VListItemAction:Xe["a"],VListItemContent:Ne["b"],VListItemSubtitle:Ne["c"],VListItemTitle:Ne["d"],VTextField:Ee["a"]});var Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-avatar",{attrs:{icon:"",left:"",color:e.avatar.color,size:"28"}},[a("span",{staticClass:"white--text"},[e._v(e._s(e.avatar.uid))])])},We=[],Ke={name:"MorphologyGroupAvatar",components:{},data:function(){return{}},props:["avatar"],computed:{},methods:{}},et=Ke,tt=a("8212"),at=Object(fe["a"])(et,Ze,We,!1,null,null,null),ot=at.exports;ge()(at,{VAvatar:tt["a"]});var nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({attrs:{text:""}},o),[e._v(" "+e._s(e.cardinality.min)+" … "+e._s(e.cardinality.max)+" ")])]}}])},[a("v-list",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"21em"}},e._l(e.possibleCardinalities,(function(t){return a("v-list-item",{key:t.min+"-"+t.max,on:{click:function(a){return e.setCardinality(t)}}},[a("v-list-item-title",[e._v(e._s(t.min)+" … "+e._s(t.max))])],1)})),1)],1)},it=[],rt={name:"MorphologyRestrictionGroupCardinality",data:function(){return{}},props:["ruleId"],computed:{rule:function(){return this.$store.getters["rules/ruleById"](this.ruleId)},cardinality:function(){return this.rule.condition.args.nOf},possibleCardinalities:function(){for(var e=0,t=Object(d["a"])(R({expression:this.rule.template})).length,a=[],o=e;o<=t;o++)for(var n=o;n<=t;n++)a.push({min:o,max:n});return a}},methods:{setCardinality:function(e){this.$store.getters["rules/ruleCopyById"](this.ruleId);this.$store.dispatch("changeRuleCondition",{ruleId:this.ruleId,condition:{type:j.CARDINALITY.key,args:{nOf:e}}}),this.$gtag.event("set_cardinality",{})}}},st=rt,ct=Object(fe["a"])(st,nt,it,!1,null,null,null),lt=ct.exports;ge()(ct,{VBtn:Ie["a"],VList:Le["a"],VListItem:$e["a"],VListItemTitle:Ne["d"],VMenu:De["a"]});var dt={name:"MorphologyGroup",components:{MorphologyEditableToolbar:Oe,MorphologyItem:qe,MorphologyRuleAvatar:ot,MorphologyRuleCardinality:lt},data:function(){return{}},props:["ruleId"],computed:{rule:function(){return this.$store.getters["rules/ruleById"](this.ruleId)},items:function(){return R({expression:this.rule.template})},avatar:function(){return ie(this.rule.avatarIndex)}},methods:{changeCaption:function(e){this.$store.commit("rules/changeRuleName",{ruleId:this.ruleId,name:e}),this.$gtag.event("change_caption_group",{event_label:e})},remove:function(){this.$gtag.event("remove_rule",{event_label:this.rule.name}),this.$store.dispatch("removeRule",{ruleId:this.ruleId})},createItem:function(){this.$store.dispatch("createItem",{ruleId:this.ruleId}),this.$gtag.event("create_item",{})}}},ut=dt,pt=a("b0af"),ft=a("99d9"),mt=a("62ad"),vt=Object(fe["a"])(ut,ae,oe,!1,null,null,null),ht=vt.exports;ge()(vt,{VBtn:Ie["a"],VCard:pt["a"],VCardActions:ft["a"],VCol:mt["a"],VIcon:xe["a"]});var bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("morphology-solution-info")},yt=[],gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Solution Info")]),a("morphology-solver",{attrs:{searcher:e.currentSolver,statistics:e.currentStatistics,onComplete:e.onSearchComplete,onCancel:e.onSearchCancel,fullSolutionsSpace:e.fullSolutionsSpace,solutionsSpaceEstimation:e.solutionsSpaceEstimation}}),a("v-list",[e.isTopologyChanged?a("v-list-item",[a("v-list-item-content",[a("v-alert",{staticClass:"body-2",attrs:{dense:"",outlined:"",type:"warning"}},[e._v(" Data changed."),a("br"),e._v(" Solution may not satisfy new conditions. ")])],1)],1):e._e(),a("v-divider"),a("v-subheader",[e._v("General")]),a("morphology-solution-statistics",{attrs:{fullSolutionsSpace:e.fullSolutionsSpace,solutionsSpaceEstimation:e.solutionsSpaceEstimation,checkedSolutions:e.statistics&&e.statistics.checkedSolutions,scoredSolutions:e.statistics&&e.statistics.scoredSolutions,searchTime:e.statistics&&e.statistics.searchTime,isChanged:e.isTopologyChanged}}),a("v-divider"),a("v-subheader",[e._v("Best Solution")]),e.solutionDescription?e._l(e.solutionDescription,(function(t){return a("v-list-item",{key:t.grupId},[a("v-list-item-content",[e.rules[t.ruleId].name?a("v-list-item-title",[e._v(" "+e._s(e.rules[t.ruleId].name)+" ")]):a("v-list-item-title",[e._v(" Unknown group ")]),t.items.length>0?e._l(t.items,(function(t){return a("v-list-item-subtitle",{key:t,class:e.textClasses},[e.items[t].text?a("span",[e._v(" "+e._s(e.items[t].text)+" ")]):a("span",[e._v(" Unknown item ")])])})):a("v-list-item-subtitle",{class:e.textClasses},[e._v(" — ")])],2)],1)})):a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[e._v("No info")]),a("v-list-item-subtitle",[e._v('Press "Solve" to build one')])],1)],1)],2),a("v-card-actions",[a("v-btn",{attrs:{color:"success"},on:{click:e.runSolver}},[e._v("Solve")])],1)],1)},It=[],xt=(a("b64b"),a("fb6a"),a("96cf"),regeneratorRuntime.mark(Rt)),_t=function e(t,a){Object(p["a"])(this,e),this.items=t,this.score=a};function Et(e,t){return e.score>t.score?-1:e.score<t.score?1:0}var St=function(){function e(t){Object(p["a"])(this,e),this.size=t,this.solutions=[]}return Object(f["a"])(e,[{key:"registerSolution",value:function(e,t){if(this.solutions.length>=this.size&&this.solutions[this.solutions.length-1].score>t)return!1;this.solutions.push(new _t(e,t)),this.solutions.sort(Et),this.solutions.length>this.size&&this.solutions.pop()}},{key:"bestSolution",value:function(){return 0==this.solutions.length?null:this.solutions[0]}}]),e}(),Tt=function(){function e(t){Object(p["a"])(this,e),this.items=[],this.solutions=new St(t)}return Object(f["a"])(e,[{key:"depth",value:function(){return this.items.length}},{key:"forward",value:function(e){this.items.push(e)}},{key:"backward",value:function(){this.items.pop()}},{key:"acceptCurrentSolution",value:function(e){this.solutions.registerSolution(this.items.slice(),e)}}]),e}();function Ct(e,t){for(var a in t)if(!t[a].checkUpper(e))return!1;return!0}function Ot(e,t){for(var a in t)if(!t[a].checkLower(e))return!1;return!0}function Mt(e,t){var a=0;for(var o in t)a+=t[o].score(e);return a}function At(e,t){var a=[];for(var o in t){var n=t[o],i=n.score(e);0!=i&&a.push({ruleId:n.ruleId,score:i})}return a}function Rt(e){var t,a,o,n,i,r,s,c,l;return regeneratorRuntime.wrap((function(d){while(1)switch(d.prev=d.next){case 0:t=e.searcher,a=e.items,o=e.checkers,n=e.statistics,i=e.breakEvery,r=[0],s=0,c=a.length,l=0;case 5:if(!(s>=0)){d.next=27;break}if(!(c<=r[s])){d.next=12;break}return r.pop(),s-=1,r[s]+=1,t.backward(),d.abrupt("continue",5);case 12:if(n.checkedSolutions+=1,l+=1,l%i!=0){d.next=17;break}return d.next=17,null;case 17:if(t.forward(a[r[s]]),Ct(t,o)){d.next=22;break}return t.backward(),r[s]+=1,d.abrupt("continue",5);case 22:Ot(t,o)&&(n.scoredSolutions+=1,t.acceptCurrentSolution(Mt(t.items,o))),r.push(r[s]+1),s+=1,d.next=5;break;case 27:case"end":return d.stop()}}),xt)}function wt(e){return e<=1?1:wt(e-1)*e}function kt(e,t){return wt(e)/(wt(t)*wt(e-t))}function Vt(e,t,a){for(var o=0,n=t;n<=a;n++)o+=kt(e,n);return o}a("4de4"),a("a15b");var Lt=new l.a({GROUP_HAS_NO_SCORED_ITEMS:0,BEST_SOLUTIONS_DIFFERENCES:1},{name:"ADVICE_TYPE",freez:!0}),$t=[];function Nt(e){var t=e.type,a=e.uid,o=e.data;return{type:t.key,uid:"advice:".concat(t.key,":").concat(a),data:o}}function Dt(e){var t=e.currentRules,a=(e.solutions,[]);for(var o in t){var n=t[o];if(L.GROUP.is(n.type)){var i=!1,r=Object(d["a"])(R({expression:n.template}));for(var s in r){var c=r[s],l=H(t,L.ITEM_SCORE,c);if(null!=l){i=!0;break}}i||a.push(Nt({type:Lt.GROUP_HAS_NO_SCORED_ITEMS,uid:o,data:{ruleId:o}}))}}return a}function jt(e){e.currentRules;var t=e.solutions,a=5,o=5;if(0==t.length)return[];var n=t[0].score;t=t.filter((function(e){return e.score==n}));for(var i=[],r=0;r<t.length-1;r++)for(var s=function(e){var a=t[r].items,o=t[e].items,n=Y(a,o),s=a.filter((function(e){return-1==n.indexOf(e)})),c=o.filter((function(e){return-1==n.indexOf(e)})),l=[].concat(Object(d["a"])(s),Object(d["a"])(c));l.sort(),i.push(Nt({type:Lt.BEST_SOLUTIONS_DIFFERENCES,uid:l.join("/"),data:{itemsCommon:n,itemsA:s,itemsB:c}}))},c=r+1;c<t.length;c++)s(c);return i.length<=a+o?i:(i.sort((function(e,t){var a=e.data.itemsA.length+e.data.itemsB.length,o=t.data.itemsA.length+t.data.itemsB.length;return a>o?1:a<o?-1:0})),[].concat(Object(d["a"])(i.slice(0,a+1)),Object(d["a"])(i.slice(-o))))}$t[$t.GROUP_HAS_NO_SCORED_ITEMS]={name:"Group has no scored items"},$t[$t.BEST_SOLUTIONS_DIFFERENCES]={name:"Best solutions has minor differences"};var Ft={};function Pt(e){var t=e.currentRules,a=e.solutions,o=[];for(var n in Ft){var i=Ft[n]({currentRules:t,solutions:a});o.push.apply(o,Object(d["a"])(i))}return o}Ft[Lt.GROUP_HAS_NO_SCORED_ITEMS]=Dt,Ft[$t.BEST_SOLUTIONS_DIFFERENCES]=jt;var Ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",[a("morphology-solution-statistics-record",{attrs:{caption:"Possible solutions","is-changed":e.isChanged,value:e.fullSolutionsSpace}}),a("morphology-solution-statistics-record",{attrs:{caption:"Expected solutions","is-changed":e.isChanged,value:e.solutionsSpaceEstimation}}),a("morphology-solution-statistics-record",{attrs:{caption:"Checked solutions","is-changed":e.isChanged,value:e.checkedSolutions}}),a("morphology-solution-statistics-record",{attrs:{caption:"Scored solutions","is-changed":e.isChanged,value:e.scoredSolutions}}),a("morphology-solution-statistics-record",{attrs:{caption:"Time consumed","is-changed":e.isChanged,value:e.searchTime,suffix:"sec"}})],1)},Bt=[],Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(e.caption)+":")])],1),a("v-list-item-action",[e.value?a("v-list-item-action-text",[a("morphology-short-number",{class:e.textClasses,attrs:{value:e.value,maxDigits:"5",precision:"2"}}),e.suffix?a("span",[e._v(" "+e._s(e.suffix)+" ")]):e._e()],1):a("v-list-item-action-text",[e._v(" — ")])],1)],1)},Ht=[],Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e._v(" "+e._s(e.formated.number)+" "),0!=e.formated.exponenta?a("span",[e._v(" * 10"),a("sup",[e._v(e._s(e.formated.exponenta))])]):e._e()])},Jt=[],zt=(a("6b93"),{name:"MorphologyShortNumber",components:{},data:function(){return{}},props:["value","maxDigits","precision"],computed:{formated:function(){var e=parseInt(Math.ceil(Math.log10(this.value)));if(e<=this.maxDigits)return{number:this.value,exponenta:0};var t=e-1,a=Math.pow(10,this.precision),o=Math.round(this.value/Math.pow(10,t)*a)/a;return{number:o,exponenta:t}}},methods:{}}),Xt=zt,Qt=Object(fe["a"])(Xt,Yt,Jt,!1,null,null,null),qt=Qt.exports,Zt={name:"MorphologySolutionStatisticsRecord",components:{MorphologyShortNumber:qt},data:function(){return{}},props:["caption","value","isChanged","suffix"],computed:{textClasses:function(){return this.isChanged?"warning--text":""}},methods:{}},Wt=Zt,Kt=Object(fe["a"])(Wt,Gt,Ht,!1,null,null,null),ea=Kt.exports;ge()(Kt,{VListItem:$e["a"],VListItemAction:Xe["a"],VListItemActionText:Ne["a"],VListItemContent:Ne["b"],VListItemTitle:Ne["d"]});var ta={name:"MorphologySolutionStatistics",components:{MorphologySolutionStatisticsRecord:ea},data:function(){return{}},props:["fullSolutionsSpace","solutionsSpaceEstimation","checkedSolutions","scoredSolutions","searchTime","isChanged"],computed:{}},aa=ta,oa=a("8dd9"),na=Object(fe["a"])(aa,Ut,Bt,!1,null,null,null),ia=na.exports;ge()(na,{VSheet:oa["a"]});var ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-overlay",{attrs:{absolute:!1,opacity:.5,value:!!e.searcher}},[a("v-card",{attrs:{light:""}},[a("v-card-title",[e._v("Solution search progress")]),a("morphology-solution-statistics",{attrs:{fullSolutionsSpace:e.fullSolutionsSpace,solutionsSpaceEstimation:e.solutionsSpaceEstimation,checkedSolutions:e.statistics&&e.statistics.checkedSolutions,scoredSolutions:e.statistics&&e.statistics.scoredSolutions,searchTime:e.statistics&&e.statistics.searchTime}}),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:e.cancel}},[e._v(" Cancel ")])],1)],1)],1)},sa=[],ca={name:"MorphologySolver",components:{MorphologySolutionStatistics:ia},data:function(){var e=this,t=setInterval((function(){e.doStep()}),1);return{timer:t}},props:["searcher","onComplete","onCancel","statistics","fullSolutionsSpace","solutionsSpaceEstimation"],computed:{},methods:{cancel:function(){this.onCancel()},doStep:function(){if(this.searcher){var e=this.searcher.next();this.statistics.searchTime=(Date.now()-this.statistics.searchStartAt)/1e3,e.done&&this.onComplete()}}}},la=ca,da=a("a797"),ua=Object(fe["a"])(la,ra,sa,!1,null,null,null),pa=ua.exports;ge()(ua,{VBtn:Ie["a"],VCard:pt["a"],VCardActions:ft["a"],VCardTitle:ft["c"],VOverlay:da["a"]});var fa={name:"MorphologySolutionInfo",components:{MorphologySolver:pa,MorphologySolutionStatistics:ia},data:function(){return{statistics:null,searcher:null,topologyVersion:null,currentSolver:null,currentStatistics:null}},props:[],computed:{items:function(){return this.$store.getters["items/activeItems"]},rules:function(){return this.$store.getters["rules/activeRules"]},isTopologyChanged:function(){return null!=this.topologyVersion&&this.$store.state.topologyVersion!=this.topologyVersion},textClasses:function(){return this.isTopologyChanged?"warning--text":""},fullSolutionsSpace:function(){return Math.pow(2,Object.keys(this.items).length)},solutionsSpaceEstimation:function(){var e=this.$store.getters["rules/groupRulesIds"],t=1;for(var a in e){var o=this.$store.getters["rules/ruleById"](e[a]);t*=Vt(R({expression:o.template}).size,o.condition.args.nOf.min,o.condition.args.nOf.max)}return t},solutionDescription:function(){var e=this.$store.getters["solutions/bestSolutionItems"],t=[],a=this.$store.getters["rules/groupRulesIds"];for(var o in a){var n=a[o],i=this.rules[n],r={ruleId:n,items:[]};for(var s in e){var c=e[s];M({expression:i.template,itemId:c})&&r.items.push(c)}t.push(r)}return t}},methods:{runSolver:function(){var e=Object.keys(this.$store.getters["items/activeItems"]),t=[];for(var a in this.rules){var o=JSON.parse(JSON.stringify(this.rules[a]));t.push.apply(t,Object(d["a"])(q(a,o)))}this.currentStatistics={checkedSolutions:0,scoredSolutions:0,searchStartAt:Date.now(),searchTime:0};var n=100;this.searcher=new Tt(n),this.currentSolver=Rt({searcher:this.searcher,items:e,checkers:t,statistics:this.currentStatistics,breakEvery:1e4}),this.$gtag.event("solution_search_start",{})},onSearchComplete:function(){this.currentSolver=null,this.statistics=this.currentStatistics,this.currentStatistics=null,this.$store.commit("solutions/rewriteSolutions",{solutions:this.searcher.solutions.solutions}),this.searcher=null;var e=Pt({currentRules:this.$store.getters["rules/activeRules"],solutions:this.$store.getters["solutions/currentSolutions"]});this.$store.commit("advices/refreshAdvices",{advices:e}),this.topologyVersion=this.$store.state.topologyVersion,this.$gtag.event("solution_search_completed",{value:parseInt(this.statistics.searchTime)})},onSearchCancel:function(){this.currentSolver=null,this.searcher=null,this.$gtag.event("solution_search_canceled",{})}}},ma=fa,va=a("0798"),ha=a("ce7e"),ba=a("e0c7"),ya=Object(fe["a"])(ma,gt,It,!1,null,null,null),ga=ya.exports;ge()(ya,{VAlert:va["a"],VBtn:Ie["a"],VCard:pt["a"],VCardActions:ft["a"],VCardTitle:ft["c"],VDivider:ha["a"],VList:Le["a"],VListItem:$e["a"],VListItemContent:Ne["b"],VListItemSubtitle:Ne["c"],VListItemTitle:Ne["d"],VSubheader:ba["a"]});var Ia={name:"MorphologyMainPanel",components:{MorphologySolutionInfo:ga},data:function(){return{}},methods:{}},xa=Ia,_a=Object(fe["a"])(xa,bt,yt,!1,null,null,null),Ea=_a.exports,Sa=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{"max-width":"1200px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[o("v-btn",e._g({attrs:{color:"success"}},a),[o("v-icon",{attrs:{left:""}},[e._v("mdi-help-circle-outline")]),e._v(" Help ")],1)]}}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[o("v-card",[o("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v(" Привет! ")]),o("v-card-text",{staticClass:"black--text body-1"},[o("br"),o("p",[e._v(" Это "),o("strong",[e._v("прототип")]),e._v(" софта для исследования пространства решений сложных проблем. ")]),o("p",[e._v(" Он может пригодиться, если вам необходимо найти решение / выбрать архитектуру / определить лучшее сочетание параметров в сложной и / или слабо формализированной области. ")]),o("p",[e._v(" Например, вы знаете, что решение может обладать свойствами A, B, C, D, … Z, но не знаете какое сочетание свойств будет оптимальным. При том, что A и D несовместимы, а сочетание свойств B+X+Y выглядит лучше, чем P+Q. ")]),o("p",[e._v(" В этом случае вы можете ввести список свойств, ограничения, и поэкспериментировать, меняя правила подбора и оценки решений. ")]),o("p",[e._v(" По сути, софт помогает делать полный перебор всех вариантов решений с ограничениями. ")]),o("p",[e._v(" Немного подробнее написано в википедии: "),o("a",{attrs:{href:"https://ru.wikipedia.org/wiki/Морфологический_анализ_(изобретательство)"}},[e._v("морфологический анализ")]),e._v(". ")]),o("p",[e._v(" Для обсуждения есть чат в "),o("a",{attrs:{href:"https://t.me/joinchat/HA7ACB09k1-CXOuSSog4Vg"}},[e._v("Телегам")]),e._v(". ")]),o("p",[o("strong",[e._v("Я буду очень благодарен за любые отзывы, критику, предложения, etc…")])]),o("h2",[e._v("Моя мотивация")]),o("br"),o("p",[e._v(" Несколько раз в месяц мне приходится решать нестандартные задачи. Обычно они предполагают нетривиальный выбор из нескольких альтернативных решений, иногда оказывается, что интересное решение я упустил из рассмотрения. Поэтому я давно ищу инструмент, который упростил бы «исследовательскую» часть работы. ")]),o("p",[e._v(" Предполагаю, что я не один такой. ")]),o("p",[e._v(" В попытках найти такой инструмент я залез довольно глубоко в интернеты иии… ничего не нашёл. То есть нашёл: дорогой корпоративный софт, который мне и посмотреть не дадут, скудненькие научные статьи на эту тему (в том числе, с примерами решения правительственных задач этим методом) и один недопрототип на гитхабе. ")]),o("p",[e._v(" В итоге звёзды сошлись так, что у меня появилось и время и мотивация. ")]),o("p",[e._v(" Я уверен, что сама проблема существует и что софта для её решения нет. Но не уверен, что выбранный мной подход оптимален. ")]),o("p",[e._v(" Этим прототипом я хочу проверить выбранное направление движения, собрать ваши отзывы и советы. ")]),o("h2",[e._v("Вопросы")]),o("br"),o("p",[e._v(" Вот некоторые вопросы, за любое ваше мнение по которым я буду благодарен. ")]),o("ol",[o("li",[e._v("Актуальна ли проблема?")]),o("li",[e._v("Может быть можно уточнить / переформулировать проблему? Расширить или сузить.")]),o("li",[e._v("Правильно ли выбрано направление развитие софта?")]),o("li",[e._v("Какую терминологию лучше использовать? Английскую и русскую. С терминами пока «беда».")]),o("li",[e._v("На какой ЦА лучше сосредоточиться в первую очередь? Может есть какие-нибудь малоизвестные сообщества?")]),o("li",[e._v("Какие задачи взять для примеров?")]),o("li",[e._v("Где / кому / в каких сообществах лучше это показывать?")]),o("li",[e._v("Что работает, что не работает, чего не хватает?")]),o("li",[e._v("Пытаться это направление развивать как коммерческое? Как open source? Забить?")])]),o("br"),o("h2",[e._v("Как пользоваться")]),o("br"),o("p",[o("strong",[e._v("Слева")]),e._v(" вы можете увидеть блок "),o("var",[e._v("Solution Info")]),e._v(" — это панель с главной информацией о текущем решении (если оно найдено). ")]),o("p",[e._v(" Если вы нажмёте кнопку "),o("v-btn",{attrs:{color:"success",small:""}},[e._v("SOLVE")]),e._v(", то софт попробует найти решение по текущим данным. ")],1),o("p",[o("strong",[e._v("Сверху справа")]),e._v(" находится несколько общих команд, среди них: ")]),o("ul",[o("li",[o("v-btn",{attrs:{color:"success",small:""}},[o("v-icon",{attrs:{left:""}},[e._v("mdi-help-circle-outline")]),e._v("Help")],1),e._v(" показывает этот диалог;")],1),o("li",[o("v-btn",{attrs:{color:"warning",small:""}},[e._v("Examples"),o("v-icon",{attrs:{right:""}},[e._v("mdi-chevron-down")])],1),e._v(" позволяет загрузить один из подготовленных примеров.")],1)]),o("br"),o("p",[o("strong",[e._v("Сверху слева")]),e._v(" панель переключения между режимами работы / отображения информации: ")]),o("ul",[o("li",[o("var",[e._v("Groups")]),e._v(" — основной режим, позволяет создавать свойства, группы свойств и настраивать самые простые ограничения")]),o("li",[o("var",[e._v("Rules")]),e._v(" — режим отображения правил — ограничений перебора — позволяет задавать сложные правила и просто отображает все ограничения «как есть».")]),o("li",[o("var",[e._v("Solutions")]),e._v(" — список найденных решений.")]),o("li",[o("var",[e._v("Advices")]),e._v(" — список советов, как улучшить решение. Советы — результат работы эвристик, после нахождения хоть какого-нибудь решения (на текущий момент).")])]),o("h3",[e._v("Groups")]),o("p",[e._v(" Основная вкладка. Позволяет просматривать и редактировать группы свойств. В том числе позволяет задавать самые простые ограничения. ")]),o("p",[e._v(" Пояснение по описанию группы: ")]),o("div",{staticClass:"d-flex"},[o("img",{attrs:{align:"left",src:a("6469")}}),o("ol",{staticStyle:{"list-style-position":"inside"}},[o("li",[e._v("Аватарка группы, используется в других вкладках при отображении входящих в неё свойств.")]),o("li",[e._v("Сколько свойств из группы может быть в решении (от x до y включительно).")]),o("li",[e._v("Это свойство обязательно должно быть включено в решение.")]),o("li",[e._v("Это свойство обязательно должен быть исключено из решения.")]),o("li",[e._v("Кнопка выбора режима свойства (опционально, обязательно, запрещено).")])])]),o("h3",[e._v("Rules")]),o("p",[e._v(" Список всех правил / ограничений. Обратите внимание, группы — те же ограничения, поэтому присутствуют на этой вкладке, но в другом виде. ")]),o("p",[e._v(" Часть правил имеет серый заголовок с замочком — это «системные» правила, управляемые через другие части интерфейса (в данный момент, во вкладке Groups). ")]),o("p",[e._v(" Все правила действуют по одному принципу: находят пересечение множества своих свойств со свойствами проверяемого решения и на основе результата делают соответствующие действия. ")]),o("p",[e._v(" Каждое правило состоит из трёх частей: ")]),o("ul",[o("li",[e._v("Действие при срабатывании: "),o("ul",[o("li",[o("var",[e._v("Reject Solution")]),e._v(" — отклонить проверяемое решение, если сработает условие.")]),o("li",[o("var",[e._v("Accept Solution")]),e._v(" — отклонить проверяемое решение, если не сработает условие.")]),o("li",[o("var",[e._v("Change Solution Score at")]),e._v(" — изменить оценку проверяемого решения, если сработает условие.")])])]),o("li",[e._v("Условия срабатывания: "),o("ul",[o("li",[o("var",[e._v("solution contains all of items")]),e._v(" — решение содержит все свойства из шаблона.")]),o("li",[o("var",[e._v("solution contains none of items")]),e._v(" — решение не содержит ни одно свойство из шаблона.")]),o("li",[o("var",[e._v("solution contains N of items")]),e._v(" — решение содержит от x до y свойств из шаблона.")])])]),o("li",[e._v("Шаблон — «регулярное выражение», описывающее наборы свойств, которыми оперирует правило. ")])]),o("p",[e._v(" Представление шаблона как выражения для генерации свойств, вместо их простого перечисления, позволяет значительно сократить количество необходимых правил и в целом удобно (смотрите пример с одеждой). ")]),o("p",[e._v(" Шаблон читается слева направо «по стрелочкам». Каждый вариант пути по стрелочкам соответствует одному набору свойств. Чтобы правило сработало, его условие должно сработать хотя бы на одном из наборов. ")]),o("p",[e._v(" Пример правила с шаблоном: ")]),o("div",{staticClass:"d-flex"},[o("img",{attrs:{align:"left",src:a("561c")}}),o("p",{staticClass:"ml-1"},[e._v(" Правило отклонит проверяемое решение, если в нём попадётся любое сочетание бюжетерии из серебра из золота (шаблон описывает 4 возможных сочетания). ")])]),o("h3",[e._v("Solutions")]),o("p",[e._v(" После того, как будут обработаны все варианты решений, в этой вкладке будет список лучших 100. Для каждого решения можно посмотреть пояснение по его итоговой оценке, если кликнуть по надписи «score X». ")]),o("h3",[e._v("Advices")]),o("p",[e._v(" Этот режим работы, потенциально, должен быть самым интересным. Во вкладке должна происходить интерактивная работа с эвристиками, которые должны помогать сократить область поиска и уточнить оценку решений. ")]),o("p",[e._v(" На текущий момент реализовано несколько простых эвристик «для теста», которые просто дают советы (попробуйте пример со снегоходом). ")])]),o("v-divider"),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.show=!1}}},[e._v(" Всё ясно ")])],1)],1)],1)},Ta=[],Ca={name:"MorphologyHelp",components:{},data:function(){return{show:null===localStorage.getItem("showHelp")||"true"===localStorage.showHelp}},props:[],computed:{},methods:{},watch:{show:function(e){e?this.$gtag.event("show_help",{}):this.$gtag.event("hide_help",{}),localStorage.showHelp=e}}},Oa=Ca,Ma=a("169a"),Aa=Object(fe["a"])(Oa,Sa,Ta,!1,null,null,null),Ra=Aa.exports;ge()(Aa,{VBtn:Ie["a"],VCard:pt["a"],VCardActions:ft["a"],VCardText:ft["b"],VCardTitle:ft["c"],VDialog:Ma["a"],VDivider:ha["a"],VIcon:xe["a"],VSpacer:_e["a"]});var wa=a("1b14"),ka=a("26eb"),Va={name:"App",components:{MorphologyMainPanel:Ea,MorphologyGroup:ht,MorphologyHelp:Ra},data:function(){return{examples:[{name:"Выбор одежды",data:wa},{name:"Снегоход (из википедии)",data:ka}]}},computed:{totalRules:function(){return this.$store.getters["rules/rulesNumber"]},totalSolutions:function(){return this.$store.getters["solutions/solutionsNumber"]},visibleAdvices:function(){return this.$store.getters["advices/visibleAdvicesNumber"]},totalAdvices:function(){return this.$store.getters["advices/advicesNumber"]}},methods:{onClear:function(){this.$store.dispatch("clearAll")},onImport:function(){var e=document.getElementById("morphology-import-file");e.click()},onExport:function(){var e=JSON.stringify(this.$store.getters["serialize"],null,2),t=new File([e],"morphology.json",{type:"application/json;charset=utf-8"});s["saveAs"](t)},onImportFileSelect:function(e){var t=e.target.files[0],a=new FileReader,o=this.$store;a.onload=function(e){o.dispatch("importAll",{data:JSON.parse(e.target.result)})},a.readAsText(t)},loadExample:function(e){this.$gtag.event("load_example",{event_category:e.name}),this.$store.dispatch("importAll",{data:e.data})}},created:function(){for(var e=[],t=0;t<8;t++){var a=r["a"]();this.$store.dispatch("createItem",{itemId:a,text:"item ".concat(t)}),e.push(a)}this.$store.dispatch("createGroupRule",{name:"XYZ",items:[e[0],e[1],e[4]]}),this.$store.dispatch("createGroupRule",{name:"P Q R S",items:[e[2],e[3]]}),this.$store.dispatch("createGroupRule",{name:"third group",items:[e[5],e[6],e[7]]});var o=B({type:L.ITEM_SCORE,template:w({items:[e[1]]}),action:{type:N.SCORE.key,args:{score:{amount:10}}},name:te(this.$store.getters["items/activeItems"][e[1]])});this.$store.dispatch("setRule",{ruleId:r["a"](),rule:o});var n=B({type:L.ITEM_SCORE,template:w({items:[e[5]]}),action:{type:N.SCORE.key,args:{score:{amount:3}}},name:te(this.$store.getters["items/activeItems"][e[5]])});this.$store.dispatch("setRule",{ruleId:r["a"](),rule:n})}},La=Va,$a=a("7496"),Na=a("40dc"),Da=a("a609"),ja=a("a523"),Fa=a("a75b"),Pa=a("0fd9"),Ua=Object(fe["a"])(La,n,i,!1,null,null,null),Ba=Ua.exports;ge()(Ua,{VApp:$a["a"],VAppBar:Na["a"],VBtn:Ie["a"],VBtnToggle:Da["a"],VCol:mt["a"],VContainer:ja["a"],VContent:Fa["a"],VIcon:xe["a"],VList:Le["a"],VListItem:$e["a"],VListItemTitle:Ne["d"],VMenu:De["a"],VRow:Pa["a"],VSpacer:_e["a"],VToolbar:Se["a"],VToolbarTitle:Te["a"]});var Ga=a("8c4f"),Ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[e._l(e.groupRulesIds,(function(e){return a("morphology-group",{key:e,attrs:{"rule-id":e}})})),a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.createGroupRule}},[e._v(" Create group ")])],1)],2)},Ya=[],Ja={name:"Groups",components:{MorphologyGroup:ht},computed:{groupRulesIds:function(){return this.$store.getters["rules/groupRulesIds"]}},methods:{createGroupRule:function(){this.$store.dispatch("createGroupRule",{createFirstItem:!0}),this.$gtag.event("create_group_rule",{})}}},za=Ja,Xa=Object(fe["a"])(za,Ha,Ya,!1,null,null,null),Qa=Xa.exports;ge()(Xa,{VBtn:Ie["a"],VCol:mt["a"],VRow:Pa["a"]});var qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",[a("v-data-iterator",{attrs:{items:e.rules,search:e.search,"custom-filter":e.rulesFilter,"disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"header",fn:function(){return[a("v-toolbar",{staticClass:"d-flex flex-row align-center"},[a("v-btn",{staticClass:"mr-4 flex-grow-0",attrs:{color:"primary"},on:{click:e.createRule}},[e._v(" Add Rule ")]),a("v-chip",{staticClass:"mr-4"},[e._v(" "+e._s(e.rules.length)+" ")]),a("v-select",{staticClass:"flex-grow-0 mr-4 morphology-select",attrs:{items:e.actions,dense:"",clearable:"",label:"Action","menu-props":{"offset-y":!0}},model:{value:e.action,callback:function(t){e.action=t},expression:"action"}}),a("v-select",{staticClass:"flex-grow-0 mr-4 morphology-select",attrs:{items:e.conditions,dense:"",clearable:"",label:"Condition","menu-props":{"offset-y":!0}},model:{value:e.condition,callback:function(t){e.condition=t},expression:"condition"}}),a("v-select",{staticClass:"flex-grow-0 mr-4 morphology-select",attrs:{items:e.types,dense:"",clearable:"",label:"Type","menu-props":{"offset-y":!0}},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("v-text-field",{staticClass:"flex-grow-1",attrs:{clearable:"",flat:"","hide-details":"",label:"Search","prepend-inner-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("v-alert",{staticClass:"mt-8 pl-1",attrs:{type:"info"}},[e._v(" No rules found ")])]},proxy:!0},{key:"no-results",fn:function(){return[a("v-alert",{staticClass:"mt-8 pl-1",attrs:{type:"info"}},[e._v(" No rules found ")])]},proxy:!0},{key:"item",fn:function(e){return[a("morphology-rule",{key:e.item.ruleId,staticClass:"mt-4",attrs:{"rule-id":e.item.ruleId}})]}},{key:"footer",fn:function(){},proxy:!0}])})],1)],1)},Za=[],Wa=(a("caad"),a("2532"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"pb-4",attrs:{elevation:"1"}},[a("morphology-editable-toolbar",{attrs:{changeCaption:e.changeCaption,caption:e.ruleForInfo.name,allowEdit:!e.ruleLocked,emptyFiller:"Enter caption"},scopedSlots:e._u([{key:"before_title",fn:function(){return[e.ruleLocked?a("v-icon",[e._v("mdi-lock-outline")]):e._e()]},proxy:!0},{key:"after_edit_button",fn:function(){return[a("v-btn",{attrs:{icon:""},on:{click:e.remove}},[a("v-icon",[e._v("mdi-delete")])],1)]},proxy:!0}])}),a("morphology-switch",{attrs:{modes:e.bodyModes},scopedSlots:e._u([{key:"show",fn:function(){return[a("morphology-rule-info",{staticClass:"pl-4 pr-4 pt-4",attrs:{rule:e.ruleForInfo}}),e.ruleLocked?e._e():a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.startEdit}},[e._v("Edit")])],1)]},proxy:!0},{key:"edit",fn:function(){return[a("morphology-rule-editor",{staticClass:"pl-4 pr-4 pt-4",attrs:{rule:e.ruleForEdit}}),e.ruleLocked?e._e():a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"success"},on:{click:e.saveEdit}},[e._v("Save")]),a("v-btn",{attrs:{text:""},on:{click:e.cancelEdit}},[e._v("Cancel")])],1)]},proxy:!0}]),model:{value:e.bodyMode,callback:function(t){e.bodyMode=t},expression:"bodyMode"}})],1)}),Ka=[],eo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",[a("morphology-rule-action-editor",{attrs:{action:e.rule.action}}),e._v(" if it contains "),a("morphology-rule-condition-editor",{attrs:{condition:e.rule.condition}}),a("div",{staticClass:"pt-4 pb-4",staticStyle:{overflow:"auto"}},[a("morphology-rule-template",{attrs:{template:e.rule.template,rootTemplate:e.rule.template,grow:!1,mode:"edit"}})],1),a("p",[a("strong",[e._v("Expected sets")]),e._v(": "+e._s(e.templateSetsNumber)+" ")])],1)},to=[],ao=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h-block",{attrs:{grow:e.grow,center:!0,leftArrow:e.EXPRESSION_TYPE.SET.is(e.template.type),rightArrow:e.EXPRESSION_TYPE.ALTERNATIVE.is(e.template.type),horizontalLeft:e.allowEdit,horizontalRight:!0,vertical:e.vertical,verticalUp:e.verticalUp,verticalDown:e.verticalDown}},[e.EXPRESSION_TYPE.ITEM.is(e.template.type)?a("morphology-item-chip",{staticClass:"mt-1 mb-1",attrs:{"item-id":e.template.data.itemId,onClose:e.allowEdit&&e.removeSelf}}):e.EXPRESSION_TYPE.SET.is(e.template.type)?[e._l(e.template.data.expressions,(function(t){return[e.allowEdit?a("morphology-item-selector",{attrs:{onSelect:e.addAlternative,onSelectArguments:{expressionUID:t.uid},icon:"mdi-table-row-plus-after",plusColor:"blue"}}):e._e(),a("morphology-rule-template",{key:t.uid,staticClass:"d-inline-flex",attrs:{template:t,rootTemplate:e.rootTemplate,mode:e.mode}})]})),e.allowEdit?a("morphology-item-selector",{attrs:{onSelect:e.addItem,icon:"mdi-plus",plusColor:"green"}}):e._e()]:e.EXPRESSION_TYPE.ALTERNATIVE.is(e.template.type)?a("div",{staticClass:"d-flex flex-column a"},e._l(e.template.data.expressions,(function(t,o){return a("morphology-rule-template",{key:t.uid,staticClass:"d-flex",attrs:{template:t,rootTemplate:e.rootTemplate,mode:e.mode,vertical:!0,verticalUp:0!=o,verticalDown:o!=e.template.data.expressions.length-1}})})),1):e._e()],2)},oo=[],no=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-chip",{attrs:{close:e.canBeClosed,color:e.color},on:{"click:close":function(t){return e.onCloseEvent(e.itemId)}}},[a("morphology-rule-avatar",{attrs:{avatar:e.avatar}}),e._v(" "+e._s(e.item.text)+" ")],1)},io=[],ro={name:"MorphologyItemChip",components:{MorphologyRuleAvatar:ot},data:function(){return{}},props:["itemId","onClose","color"],computed:{canBeClosed:function(){return!!this.onClose},item:function(){return this.$store.getters["items/activeItems"][this.itemId]},avatar:function(){var e=this.$store.getters["rules/ruleIdForTypeAndItem"](L.GROUP,this.itemId),t=this.$store.getters["rules/ruleById"](e);return ie(t.avatarIndex)}},methods:{onCloseEvent:function(e){this.canBeClosed&&this.onClose(e)}}},so=ro,co=a("cc20"),lo=Object(fe["a"])(so,no,io,!1,null,null,null),uo=lo.exports;ge()(lo,{VChip:co["a"]});var po=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"offset-y":"","offset-x":"","max-height":"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({attrs:{icon:"",outlined:"","x-small":"",color:e.plusColor}},o),[a("v-icon",[e._v(e._s(e.icon))])],1)]}}])},[a("v-list",{attrs:{subheader:""}},[e._l(e.groups,(function(t){return[a("v-subheader",[e._v(e._s(t.name))]),e._l(t.items,(function(t){return a("v-list-item",{key:t,on:{click:function(a){return e.onSelect(t,e.onSelectArguments)}}},[a("morphology-item-chip",{attrs:{"item-id":t}})],1)}))]}))],2)],1)},fo=[],mo={name:"MorphologyItemSelector",components:{MorphologyItemChip:uo},data:function(){return{}},props:["onSelect","plusColor","onSelectArguments","icon"],computed:{groups:function(){var e=[],t=this.$store.getters["rules/groupRulesIds"];for(var a in t){var o=this.$store.getters["rules/ruleById"](t[a]),n={name:o.name,items:R({expression:o.template})};e.push(n)}return e}}},vo=mo,ho=Object(fe["a"])(vo,po,fo,!1,null,null,null),bo=ho.exports;ge()(ho,{VBtn:Ie["a"],VIcon:xe["a"],VList:Le["a"],VListItem:$e["a"],VMenu:De["a"],VSubheader:ba["a"]});var yo={name:"HConnector",data:function(){return{}},props:{grow:{default:!1}},computed:{classes:function(){return this.grow?"d-inline-flex flex-grow-1":"d-inline-flex flex-grow-0"}},template:'<div :class="classes" style="min-width: 5px; height: 3px; background-color: black;"/>'},go={name:"HArrow",data:function(){return{}},props:{},computed:{},template:'\n<div style="width: 0; height: 0; border-top: 4px solid transparent; border-left: 12px solid black; border-bottom: 5px solid transparent;"/>'},Io={name:"VConnector",data:function(){return{}},props:{up:{default:!0},down:{default:!0},color:{default:"black"}},computed:{upColor:function(){return this.up?this.color:"transparent"},downColor:function(){return this.down?this.color:"transparent"}},template:'\n<div class="d-inline-flex flex-column align-self-stretch connector" style="width: 3px;">\n<div class="flex-grow-1" :style="\'background-color: \' + upColor + \';\'"/>\n<div class="flex-grow-0" :style="\'height: 3px; background-color: \' + color + \';\'"/>\n<div class="flex-grow-1" :style="\'background-color: \' + downColor + \';\'"/>\n</div>'},xo={name:"HBlock",components:{HConnector:yo,VConnector:Io,HArrow:go},data:function(){return{}},props:{grow:{default:!0},center:{default:!0},leftArrow:{default:!0},rightArrow:{default:!0},vertical:{default:!1},verticalUp:{default:!0},verticalDown:{default:!0},horizontalLeft:{default:!0},horizontalRight:{default:!0}},computed:{containerClasses:function(){return this.center?"d-inline-flex align-center":"d-inline-flex"}},template:'\n<div :class="containerClasses">\n<v-connector v-if="vertical" :up="verticalUp" :down="verticalDown"/>\n<h-connector v-if="horizontalLeft || leftArrow" :grow="grow"/>\n<h-arrow v-if="leftArrow"/>\n<slot/>\n<h-connector v-if="horizontalRight || rightArrow" :grow="grow"/>\n<h-arrow v-if="rightArrow"/>\n<v-connector v-if="vertical" :up="verticalUp" :down="verticalDown"/>\n</div>'},_o={name:"MorphologyRuleTemplate",components:{Fragment:de["a"],MorphologyItemChip:uo,MorphologyItemSelector:bo,HConnector:yo,VConnector:Io,HBlock:xo},data:function(){return{}},props:{grow:{default:!0},mode:{},vertical:{default:!1},template:{default:null},verticalUp:{default:!0},verticalDown:{default:!0},rootTemplate:{}},computed:{EXPRESSION_TYPE:function(){return m},allowEdit:function(){return"edit"==this.mode}},methods:{addItem:function(e){var t=h({itemId:e});g({root:this.template,child:t})},removeSelf:function(){this.removeRule(this.template.uid)},removeRule:function(e){O({expression:this.rootTemplate,uid:e})},addAlternative:function(e,t){if(m.ITEM.is(this.template.type))throw"Can not create alternative for item block";var a=h({itemId:e}),o=b();if(g({root:o,child:a}),m.SET.is(this.template.type)){var n=I({expression:this.template,uid:t.expressionUID}),i=this.template.data.expressions[n];if(m.ALTERNATIVE.is(i.type))return void g({root:i,child:o});var r=y();if(m.ITEM.is(i.type)){var s=b();g({root:s,child:i}),i=s}return g({root:r,child:i}),g({root:r,child:o}),void x({expression:this.template,uid:t.expressionUID,newExpression:r})}if(m.ALTERNATIVE.is(this.template.type))throw'items in alternatives add only thow "set" blocks'}}},Eo=_o,So=Object(fe["a"])(Eo,ao,oo,!1,null,null,null),To=So.exports,Co=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",{staticClass:"d-inline-flex align-baseline"},[a("v-select",{staticClass:"flex-grow-0 morphology-select pr-2",attrs:{items:e.conditions,dense:"","menu-props":{"offset-y":!0}},model:{value:e.condition.type,callback:function(t){e.$set(e.condition,"type",t)},expression:"condition.type"}}),a("morphology-switch",{attrs:{modes:e.conditionTypes},scopedSlots:e._u([{key:"ALL_OF",fn:function(){},proxy:!0},{key:"NONE_OF",fn:function(){},proxy:!0},{key:"CARDINALITY",fn:function(){return[e._v(" where "),a("morphology-number-input",{staticClass:"ml-1",attrs:{placeholder:"Min"},model:{value:e.condition.args.nOf.min,callback:function(t){e.$set(e.condition.args.nOf,"min",t)},expression:"condition.args.nOf.min"}}),a("v-sheet",{staticClass:"text-no-wrap ml-2 mr-2"},[e._v(" ≤ "),a("var",[e._v("N")]),e._v(" ≤ ")]),a("morphology-number-input",{attrs:{placeholder:"Max"},model:{value:e.condition.args.nOf.max,callback:function(t){e.$set(e.condition.args.nOf,"max",t)},expression:"condition.args.nOf.max"}})]},proxy:!0}]),model:{value:e.condition.type,callback:function(t){e.$set(e.condition,"type",t)},expression:"condition.type"}})],1)},Oo=[],Mo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-text-field",{staticClass:"flex-grow-0",attrs:{dense:"",type:"number",value:e.value,label:e.label,placeholder:e.placeholder},on:{change:e.onChange}})},Ao=[],Ro={name:"MorphologyNumberInput",components:{},data:function(){return{}},props:["label","placeholder","value"],computed:{},methods:{onChange:function(e){this.$emit("input",parseInt(e))}}},wo=Ro,ko=(a("df9c"),Object(fe["a"])(wo,Mo,Ao,!1,null,"532235cd",null)),Vo=ko.exports;ge()(ko,{VTextField:Ee["a"]});var Lo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-alert",{staticClass:"mb-0",staticStyle:{border:"0 !important"},attrs:{icon:"mdi-information-outline",type:e.type,outlined:"",dense:""}},[e._t("default")],2)},$o=[],No={name:"MorphologySimpleAlert",components:{},data:function(){return{}},props:["type"],computed:{},methods:{}},Do=No,jo=Object(fe["a"])(Do,Lo,$o,!1,null,null,null),Fo=jo.exports;ge()(jo,{VAlert:va["a"]});var Po={name:"MorphologyRuleConditionEditor",components:{MorphologySwitch:ve,MorphologyNumberInput:Vo,MorphologySimpleAlert:Fo},data:function(){var e=P(j,F);return{conditionTypes:e.types,conditions:e.infos}},props:["condition"],computed:{},methods:{}},Uo=Po,Bo=(a("ac51"),a("b974")),Go=Object(fe["a"])(Uo,Co,Oo,!1,null,"b2cb700e",null),Ho=Go.exports;ge()(Go,{VSelect:Bo["a"],VSheet:oa["a"]});var Yo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",{staticClass:"d-inline-flex align-baseline"},[a("v-select",{staticClass:"flex-grow-0 morphology-select pr-2",attrs:{items:e.actions,dense:"","menu-props":{"offset-y":!0}},model:{value:e.action.type,callback:function(t){e.$set(e.action,"type",t)},expression:"action.type"}}),a("morphology-switch",{attrs:{modes:e.actionTypes},scopedSlots:e._u([{key:"ACCEPT",fn:function(){},proxy:!0},{key:"REJECT",fn:function(){},proxy:!0},{key:"SCORE",fn:function(){return[a("morphology-number-input",{staticClass:"ml-1",attrs:{label:"Score",placeholder:"Score"},model:{value:e.action.args.score.amount,callback:function(t){e.$set(e.action.args.score,"amount",t)},expression:"action.args.score.amount"}})]},proxy:!0}]),model:{value:e.action.type,callback:function(t){e.$set(e.action,"type",t)},expression:"action.type"}})],1)},Jo=[],zo={name:"MorphologyRuleActionEditor",components:{MorphologySwitch:ve,MorphologyNumberInput:Vo,MorphologySimpleAlert:Fo},data:function(){var e=P(N,D);return{actionTypes:e.types,actions:e.infos}},props:["action"],computed:{},methods:{}},Xo=zo,Qo=(a("6e0d"),Object(fe["a"])(Xo,Yo,Jo,!1,null,"a227da62",null)),qo=Qo.exports;ge()(Qo,{VSelect:Bo["a"],VSheet:oa["a"]});var Zo={name:"MorphologyRuleEditor",components:{MorphologyRuleTemplate:To,MorphologyRuleConditionEditor:Ho,MorphologyRuleActionEditor:qo},data:function(){return{}},props:["rule"],computed:{templateSetsNumber:function(){return k({expression:this.rule.template})}},methods:{}},Wo=Zo,Ko=Object(fe["a"])(Wo,eo,to,!1,null,null,null),en=Ko.exports;ge()(Ko,{VSheet:oa["a"]});var tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",[a("morphology-rule-action-info",{attrs:{action:e.rule.action}}),e._v(" if it contains "),a("morphology-rule-condition-info",{attrs:{condition:e.rule.condition}}),a("div",{staticClass:"pt-4 pb-4",staticStyle:{overflow:"auto"}},[a("morphology-rule-template",{staticClass:"mt-4",attrs:{template:e.rule.template,grow:!1,mode:"info"}})],1),a("p",[a("strong",[e._v("Expected sets")]),e._v(": "+e._s(e.templateSetsNumber)+" ")])],1)},an=[],on=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("strong",[e._v(" "+e._s(e.conditionName)+" "),e.conditionType.is("ALL_OF")?void 0:e._e(),e.conditionType.is("NONE_OF")?void 0:e._e(),e.conditionType.is("CARDINALITY")?[a("code",[e._v(" where "+e._s(e.condition.args.nOf.min)+" ≤ "),a("var",[e._v("N")]),e._v(" ≤ "+e._s(e.condition.args.nOf.max)+" ")])]:e._e()],2)},nn=[],rn={name:"MorphologyRuleConditionInfo",components:{MorphologySimpleAlert:Fo},data:function(){return{}},props:["condition"],computed:{conditionType:function(){return j.get(this.condition.type)},conditionName:function(){return F[this.conditionType].text}},methods:{}},sn=rn,cn=Object(fe["a"])(sn,on,nn,!1,null,null,null),ln=cn.exports,dn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("strong",[e._v(" "+e._s(e.actionName)+" "),e.isScore?[a("code",[e._v(e._s(e.action.args.score.amount))])]:e._e()],2)},un=[],pn={name:"MorphologyRuleActionInfo",components:{},data:function(){return{}},props:["action"],computed:{actionType:function(){return N.get(this.action.type)},actionName:function(){return D[this.actionType].text},isScore:function(){return N.SCORE.is(this.action.type)}},methods:{}},fn=pn,mn=Object(fe["a"])(fn,dn,un,!1,null,null,null),vn=mn.exports,hn={name:"MorphologyRuleInfo",components:{MorphologyRuleTemplate:To,MorphologyRuleConditionInfo:ln,MorphologyRuleActionInfo:vn},data:function(){return{}},props:["rule"],computed:{templateSetsNumber:function(){return k({expression:this.rule.template})}},methods:{}},bn=hn,yn=Object(fe["a"])(bn,tn,an,!1,null,null,null),gn=yn.exports;ge()(yn,{VSheet:oa["a"]});var In={name:"MorphologyRule",components:{MorphologySwitch:ve,MorphologyEditableToolbar:Oe,MorphologyRuleEditor:en,MorphologyRuleInfo:gn},data:function(){return{bodyMode:"show",bodyModes:["show","edit"],ruleForEdit:null}},props:["ruleId"],computed:{ruleForInfo:function(){return this.$store.getters["rules/ruleById"](this.ruleId)},ruleLocked:function(){return!L.CUSTOM.is(this.ruleForInfo.type)}},methods:{changeCaption:function(e){this.$store.commit("rules/changeRuleName",{ruleId:this.ruleId,name:e}),this.$gtag.event("change_caption_rule",{event_label:e})},remove:function(){var e=this.$store.getters["rules/ruleCopyById"](this.ruleId);this.$gtag.event("remove_rule",{event_label:e.name}),this.$store.dispatch("removeRule",{ruleId:this.ruleId})},startEdit:function(){this.ruleForEdit=this.$store.getters["rules/ruleCopyById"](this.ruleId),this.bodyMode="edit"},saveEdit:function(){var e=this.$store.getters["rules/ruleCopyById"](this.ruleId);G(e,{action:this.ruleForEdit.action,condition:this.ruleForEdit.condition,template:this.ruleForEdit.template}),this.$store.dispatch("setRule",{ruleId:this.ruleId,rule:e}),this.bodyMode="show",this.$gtag.event("save_rule",{event_label:e.name})},cancelEdit:function(){this.bodyMode="show"}}},xn=In,_n=Object(fe["a"])(xn,Wa,Ka,!1,null,null,null),En=_n.exports;ge()(_n,{VBtn:Ie["a"],VCard:pt["a"],VCardActions:ft["a"],VIcon:xe["a"]});var Sn={name:"Rules",components:{MorphologyRule:En},data:function(){var e=P(N,D),t=P(j,F),a=P(L,$);return{search:"",action:null,actions:e.infos,condition:null,conditions:t.infos,type:null,types:a.infos}},computed:{rules:function(){var e=this.$store.getters["rules/rulesByCreationOrder"].slice();e.reverse();var t=[];for(var a in e){var o=e[a],n=this.$store.getters["rules/activeRules"][o];null!=this.action&&n.action.type!=this.action||(null!=this.condition&&n.condition.type!=this.condition||null!=this.type&&n.type!=this.type||t.push({ruleId:o,order:a,type:n.type}))}return t.sort((function(e,t){return L.CUSTOM.is(e.type)&&!L.CUSTOM.is(t.type)?-1:L.CUSTOM.is(t.type)&&!L.CUSTOM.is(e.type)?1:e.order<t.order?-1:t.order<e.order?1:0})),t}},methods:{createRule:function(){this.action=null,this.condition=null,this.type=null,this.$store.dispatch("setRule",{ruleId:r["a"](),rule:B({type:L.CUSTOM})}),this.$gtag.event("create_rule",{})},rulesFilter:function(e,t){var a=[],o=t?t.toLowerCase():"";for(var n in e){var i=this.$store.getters["rules/activeRules"][e[n].ruleId];if(i.name.toLowerCase().includes(o))a.push(e[n]);else{var r=Object(d["a"])(templates.getItems({expression:i.template}));for(var s in r){var c=this.$store.getters["items/activeItems"][r[s]];if(c.text.toLowerCase().includes(o)){a.push(e[n]);break}}}}return a}}},Tn=Sn,Cn=(a("3d4a"),a("c377")),On=Object(fe["a"])(Tn,qa,Za,!1,null,"0910f041",null),Mn=On.exports;ge()(On,{VAlert:va["a"],VBtn:Ie["a"],VChip:co["a"],VCol:mt["a"],VDataIterator:Cn["a"],VRow:Pa["a"],VSelect:Bo["a"],VTextField:Ee["a"],VToolbar:Se["a"]});var An=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",[a("v-data-iterator",{attrs:{items:e.solutions,search:e.search,"custom-filter":e.itemsFilter,"disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"header",fn:function(){return[a("v-toolbar",[a("v-text-field",{attrs:{clearable:"",flat:"","hide-details":"",label:"Search","prepend-inner-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("v-alert",{staticClass:"mt-8 pl-1",attrs:{type:"info"}},[e._v(" No solutions found ")])]},proxy:!0},{key:"no-results",fn:function(){return[a("v-alert",{staticClass:"mt-8 pl-1",attrs:{type:"info"}},[e._v(" No solutions found ")])]},proxy:!0},{key:"item",fn:function(t){return[a("v-sheet",{staticClass:"d-flex flex-row align-center mt-4 pl-1"},[a("strong",[e._v(" "+e._s(t.item.index+1)+" ")]),a("morphology-solution-score",{staticClass:"ml-4 flex-grow-0",attrs:{items:t.item.items}}),a("morphology-items-set",{staticClass:"ml-4 flex-grow-1",attrs:{items:t.item.items,itemsColors:e.itemsColors}})],1)]}},{key:"footer",fn:function(){},proxy:!0}])})],1)],1)},Rn=[],wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",e._l(e.items,(function(t){return a("morphology-item-chip",{key:t,staticClass:"mr-1",attrs:{"item-id":t,color:e.itemsColors[t]}})})),1)},kn=[],Vn={name:"MorphologyItemsSet",components:{MorphologyItemChip:uo},data:function(){return{}},props:{items:Array,itemsColors:{default:function(){return{}}}},computed:{},methods:{}},Ln=Vn,$n=Object(fe["a"])(Ln,wn,kn,!1,null,null,null),Nn=$n.exports;ge()($n,{VSheet:oa["a"]});var Dn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({attrs:{text:"",small:""}},o),[e._v(" score: "+e._s(e.scoreInfo.totalScore)+" ")])]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-card",{staticClass:"pb-4"},[a("v-card-title",[e._v("Total score: "+e._s(e.scoreInfo.totalScore))]),0==e.scoreInfo.appliedRules.length?a("v-alert",{attrs:{type:"info"}},[e._v(" Solution has no scores. ")]):e._l(e.scoreInfo.appliedRules,(function(t){return a("v-sheet",{key:t.ruleId,staticClass:"d-flex ml-4 mr-4 mt-1 font-weight-medium"},[a("v-sheet",{class:"flex-grow-1 "+e.ruleTextClasses(t.score)},[e._v(e._s(t.name))]),a("v-sheet",{class:"flex-grow-0 "+e.ruleTextClasses(t.score)},[e._v(e._s(t.score))])],1)}))],2)],1)},jn=[];function Fn(e,t){return e.score>t.score?-1:e.score<t.score?1:0}var Pn={name:"MorphologySolutionScore",components:{},data:function(){return{menu:!1}},props:["items"],computed:{rules:function(){return this.$store.getters["rules/activeRules"]},scoreInfo:function(){var e={totalScore:0,appliedRules:[]},t=[];for(var a in this.rules){var o=this.rules[a];t.push.apply(t,Object(d["a"])(q(a,o)))}var n=At(this.items,t);for(var i in n.sort(Fn),e.appliedRules=n,e.appliedRules){var r=e.appliedRules[i],s=this.$store.getters["rules/ruleById"](r.ruleId);r.name=s.name?s.name:"no name",e.totalScore+=r.score}return e}},methods:{ruleTextClasses:function(e){return e>0?"green--text":"red--text"}}},Un=Pn,Bn=Object(fe["a"])(Un,Dn,jn,!1,null,null,null),Gn=Bn.exports;function Hn(e,t){var a=[],o=e.getters["rules/groupRulesIds"];for(var n in o){var i,r=e.getters["rules/ruleById"](o[n]),s=Object(u["a"])(R({expression:r.template}));try{for(s.s();!(i=s.n()).done;){var c=i.value;-1!=t.indexOf(c)&&a.push(c)}}catch(l){s.e(l)}finally{s.f()}}return a}ge()(Bn,{VAlert:va["a"],VBtn:Ie["a"],VCard:pt["a"],VCardTitle:ft["c"],VMenu:De["a"],VSheet:oa["a"]});var Yn={name:"Rules",components:{MorphologyItemsSet:Nn,MorphologySolutionScore:Gn},data:function(){return{search:""}},computed:{solutions:function(){var e=this.$store.getters["solutions/currentSolutionsCopy"];for(var t in e){var a=e[t];a.index=parseInt(t),a.items=Hn(this.$store,a.items)}return e},bestSolution:function(){return this.solutions[0]},itemsColors:function(){var e={},t=this.$store.getters["items/activeItems"];for(var a in t){t[a];var o=null;-1!=this.bestSolution.items.indexOf(a)&&(o="green lighten-4"),e[a]=o}return e}},methods:{itemsFilter:function(e,t){var a=[],o=t?t.toLowerCase():"";for(var n in e){var i=e[n];for(var r in i.items){var s=i.items[r],c=this.$store.getters["items/activeItems"][s];if(c.text.toLowerCase().includes(o)){a.push(i);break}}}return a}}},Jn=Yn,zn=Object(fe["a"])(Jn,An,Rn,!1,null,null,null),Xn=zn.exports;ge()(zn,{VAlert:va["a"],VCol:mt["a"],VDataIterator:Cn["a"],VRow:Pa["a"],VSheet:oa["a"],VTextField:Ee["a"],VToolbar:Se["a"]});var Qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",[a("v-data-iterator",{attrs:{items:e.advices,"custom-filter":e.advicesFilter,"disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"header",fn:function(){return[a("v-toolbar",[a("v-btn",{attrs:{color:"primary"},on:{click:e.unhideAll}},[e._v(" Unhide All ")]),a("v-switch",{staticClass:"ml-4",attrs:{"hide-details":"",label:"Show hidden advices"},model:{value:e.showHiddenAdvices,callback:function(t){e.showHiddenAdvices=t},expression:"showHiddenAdvices"}}),a("v-spacer"),a("morphology-simple-alert",{attrs:{type:"info"}},[e._v(" List of advices refreshed every time after solutions recalculating. ")])],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("v-alert",{staticClass:"mt-8 pl-1",attrs:{type:"info"}},[e._v(" No advices found ")])]},proxy:!0},{key:"no-results",fn:function(){return[a("v-alert",{staticClass:"mt-8 pl-1",attrs:{type:"info"}},[e._v(" No advices found ")])]},proxy:!0},{key:"item",fn:function(t){return[e.ADVICE_TYPE.GROUP_HAS_NO_SCORED_ITEMS.is(t.item.type)?a("morphology-advice-group-has-no-scored-items",{staticClass:"mt-4",attrs:{advice:t.item}}):e._e(),e.ADVICE_TYPE.BEST_SOLUTIONS_DIFFERENCES.is(t.item.type)?a("morphology-advice-best-solutions-differences",{staticClass:"mt-4",attrs:{advice:t.item}}):e._e()]}}])})],1)],1)},qn=[],Zn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{elevation:"1"}},[a("v-card-title",[e._v(' Group "'+e._s(e.rule.name)+'" has no scored items ')]),a("v-card-text",[a("p",[e._v(" Your group has no items with applied scores. ")]),a("p",[e._v(" If you evaluate at least some of them, you greatly increase accuracy of generated solution. ")])]),a("morphology-advice-actions",{attrs:{advice:e.advice}})],1)},Wn=[],Kn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card-actions",[e.isHidden?e._e():a("v-btn",{attrs:{text:""},on:{click:e.hide}},[e._v("Hide")]),e.isHidden?a("v-btn",{attrs:{text:""},on:{click:e.show}},[e._v("Show")]):e._e()],1)},ei=[],ti={name:"MorphologyAdviceActions",components:{},data:function(){return{}},props:["advice"],computed:{isHidden:function(){return this.$store.getters["advices/isAdviceHidden"](this.advice.uid)}},methods:{hide:function(){this.$store.commit("advices/hideAdvice",{adviceUid:this.advice.uid}),this.$gtag.event("hide_advice",{})},show:function(){this.$store.commit("advices/showAdvice",{adviceUid:this.advice.uid}),this.$gtag.event("show_advice",{})}}},ai=ti,oi=Object(fe["a"])(ai,Kn,ei,!1,null,null,null),ni=oi.exports;ge()(oi,{VBtn:Ie["a"],VCardActions:ft["a"]});var ii={name:"MorphologyAdviceGroupHasNoScoredItems",components:{MorphologyAdviceActions:ni},data:function(){return{}},props:["advice"],computed:{rule:function(){return this.$store.getters["rules/ruleById"](this.advice.data.ruleId)}},methods:{}},ri=ii,si=Object(fe["a"])(ri,Zn,Wn,!1,null,null,null),ci=si.exports;ge()(si,{VCard:pt["a"],VCardText:ft["b"],VCardTitle:ft["c"]});var li=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{elevation:"1"}},[a("v-card-title",[e._v(" Differentiate solutions ")]),a("v-card-text",[a("p",[e._v(" Your have two (best) solutions, which differ in some items. ")]),a("p",[e._v(" If you evaluate items from one of them (or change there evaluation), you reduce the number of best solutions. ")]),a("v-subheader",[e._v("Common items")]),e.advice.data.itemsCommon.length>0?[a("morphology-items-set",{staticClass:"flex-grow-1",attrs:{items:e.advice.data.itemsCommon}})]:a("span",{staticClass:"font-italic"},[e._v(" No common part ")]),a("v-subheader",[e._v("Solution 1")]),a("morphology-items-set",{staticClass:"flex-grow-1",attrs:{items:e.advice.data.itemsA}}),a("v-subheader",[e._v("Solution 2")]),a("morphology-items-set",{staticClass:"flex-grow-1",attrs:{items:e.advice.data.itemsB}})],2),a("morphology-advice-actions",{attrs:{advice:e.advice}})],1)},di=[],ui={name:"MorphologyAdviceBestSolutionsDifferences",components:{MorphologyItemsSet:Nn,MorphologyAdviceActions:ni},data:function(){return{}},props:["advice"],computed:{rule:function(){return this.$store.getters["rules/ruleById"](this.advice.data.ruleId)}},methods:{}},pi=ui,fi=Object(fe["a"])(pi,li,di,!1,null,null,null),mi=fi.exports;ge()(fi,{VCard:pt["a"],VCardText:ft["b"],VCardTitle:ft["c"],VSubheader:ba["a"]});var vi={name:"Advices",components:{MorphologySimpleAlert:Fo,MorphologyAdviceGroupHasNoScoredItems:ci,MorphologyAdviceBestSolutionsDifferences:mi},data:function(){return{showHiddenAdvices:!1}},computed:{advices:function(){var e=this,t=this.$store.getters["advices/currentAdvices"];return this.showHiddenAdvices||(t=t.filter((function(t){return!e.$store.getters["advices/isAdviceHidden"](t.uid)}))),t},ADVICE_TYPE:function(){return Lt}},methods:{advicesFilter:function(e,t){return e},unhideAll:function(){this.$store.commit("advices/showAllAdvices")}}},hi=vi,bi=a("b73d"),yi=Object(fe["a"])(hi,Qn,qn,!1,null,null,null),gi=yi.exports;ge()(yi,{VAlert:va["a"],VBtn:Ie["a"],VCol:mt["a"],VDataIterator:Cn["a"],VRow:Pa["a"],VSpacer:_e["a"],VSwitch:bi["a"],VToolbar:Se["a"]}),o["a"].use(Ga["a"]);var Ii=[{path:"/",name:"Groups",component:Qa},{path:"/rules",name:"Rules",component:Mn},{path:"/solutions",name:"Solutions",component:Xn},{path:"/advices",name:"Advices",component:gi}],xi=new Ga["a"]({routes:Ii}),_i=xi,Ei=a("2f62"),Si=2;function Ti(e){var t=e.items,a=e.rules;return{version:Si,items:t,rules:a}}function Ci(e){var t=e.data;for(var a in t.version=2,t.rules.rules){var o=t.rules.rules[a];o.template=w({items:o.template.items})}}function Oi(e){var t=e.data;return 1==t.varsion&&Ci({data:t}),t}function Mi(){return{items:{}}}var Ai={namespaced:!0,strict:!1,state:Mi,getters:{activeItems:function(e){return e.items},serialize:function(e){return{items:e.items}}},mutations:{changeItemText:function(e,t){e.items[t.itemId].text=t.text},createItem:function(e,t){o["a"].set(e.items,t.itemId,{text:t.text||""})},removeItem:function(e,t){o["a"].delete(e.items,t.itemId)},clearAll:function(e,t){Object.assign(e,Mi())},importAll:function(e,t){e.items=t.data.items}},actions:{},modules:{}};function Ri(){return{rules:{},creationOrder:[],groupsCounter:0}}function wi(e,t){e.creationOrder.splice(e.creationOrder.indexOf(t),1),o["a"].delete(e.rules,t)}var ki={namespaced:!0,strict:!1,state:Ri,getters:{rulesNumber:function(e){return Object.keys(e.rules).length},activeRules:function(e){return e.rules},rulesByCreationOrder:function(e){return e.creationOrder},ruleById:function(e){return function(t){return e.rules[t]}},ruleCopyById:function(e){return function(t){return JSON.parse(JSON.stringify(e.rules[t]))}},ruleIdForTypeAndItem:function(e){return function(t,a){return H(e.rules,t,a)}},groupRulesIds:function(e){var t=[];for(var a in e.rules){var o=e.rules[a];L.GROUP.is(o.type)&&t.push(a)}return t},serialize:function(e){return{rules:e.rules,creationOrder:e.creationOrder,groupsCounter:e.groupsCounter}}},mutations:{removeRule:function(e,t){wi(e,t.ruleId)},setRule:function(e,t){L.GROUP.is(t.rule.type)&&(e.groupsCounter+=1,t.rule.avatarIndex=e.groupsCounter),o["a"].set(e.rules,t.ruleId,t.rule),-1==e.creationOrder.indexOf(t.ruleId)&&e.creationOrder.push(t.ruleId)},changeRuleName:function(e,t){e.rules[t.ruleId].name=t.name},addItemToRule:function(e,t){var a=e.rules[t.ruleId];g({root:a.template,child:h({itemId:t.itemId})})},changeRuleCondition:function(e,t){e.rules[t.ruleId].condition=t.condition},removeItemFromRules:function(e,t){var a=[];for(var o in e.rules){var n=e.rules[o],i=n.template,r=A({expression:i,itemId:t.itemId});null!=r&&(O({expression:i,uid:r}),U(n),S(i)&&!L.GROUP.is(n.type)&&a.push(o))}for(var s in a)wi(e,a[s])},clearAll:function(e,t){Object.assign(e,Ri())},importAll:function(e,t){e.rules=t.data.rules,e.creationOrder=t.data.creationOrder,e.groupsCounter=t.data.groupsCounter}},actions:{},modules:{}};function Vi(){return{solutions:[]}}var Li={namespaced:!0,strict:!1,state:Vi,getters:{currentSolutions:function(e){return e.solutions},currentSolutionsCopy:function(e){return JSON.parse(JSON.stringify(e.solutions))},solutionsNumber:function(e){return e.solutions.length},bestSolutionItems:function(e){return 0==e.solutions.length?null:e.solutions[0].items}},mutations:{rewriteSolutions:function(e,t){for(var a in e.solutions=[],t.solutions){var o=t.solutions[a];e.solutions.push({items:o.items,score:o.score})}},clearAll:function(e,t){Object.assign(e,Vi())}},actions:{},modules:{}};function $i(){return{advices:[],hiddenAdvices:[]}}var Ni={namespaced:!0,strict:!1,state:$i,getters:{currentAdvices:function(e){return e.advices},isAdviceHidden:function(e){return function(t){return-1!=e.hiddenAdvices.indexOf(t)}},advicesNumber:function(e){return e.advices.length},visibleAdvicesNumber:function(e){var t=0;for(var a in e.advices)-1==e.hiddenAdvices.indexOf(e.advices[a].uid)&&(t+=1);return t}},mutations:{refreshAdvices:function(e,t){e.advices=t.advices},hideAdvice:function(e,t){-1==e.hiddenAdvices.indexOf(t.adviceUid)&&e.hiddenAdvices.push(t.adviceUid)},showAdvice:function(e,t){var a=e.hiddenAdvices.indexOf(t.adviceUid);-1!=a&&e.hiddenAdvices.splice(a,1)},showAllAdvices:function(e,t){e.hiddenAdvices=[]},clearAll:function(e,t){Object.assign(e,$i())}},actions:{},modules:{}};o["a"].use(Ei["a"]);var Di=new Ei["a"].Store({strict:!1,state:{topologyVersion:r["a"]()},getters:{serialize:function(e,t){return Ti({items:t["items/serialize"],rules:t["rules/serialize"]})}},mutations:{updateTopologyVersion:function(e){e.topologyVersion=r["a"]()}},actions:{createGroupRule:function(e,t){var a=[];if(t.items&&(a=t.items.slice()),t.createFirstItem){var o=r["a"]();e.dispatch("createItem",{itemId:o,text:""}),a.push(o)}var n=b();for(var i in a){var s=a[i],c=h({itemId:s});g({root:n,child:c})}var l=B({type:L.GROUP,name:t.name||"",template:n,condition:{type:j.CARDINALITY.key,args:{nOf:{min:1,max:1}}}});e.dispatch("setRule",{ruleId:r["a"](),rule:l}),e.commit("updateTopologyVersion")},createItem:function(e,t){var a=t.itemId||r["a"]();e.commit("items/createItem",{itemId:a,text:t.text}),t.ruleId&&e.commit("rules/addItemToRule",{ruleId:t.ruleId,itemId:a}),e.commit("updateTopologyVersion")},removeItem:function(e,t){e.commit("items/removeItem",{itemId:t.itemId}),e.commit("rules/removeItemFromRules",{itemId:t.itemId}),e.commit("updateTopologyVersion")},setRule:function(e,t){e.commit("rules/setRule",{ruleId:t.ruleId,rule:t.rule}),e.commit("updateTopologyVersion")},removeRule:function(e,t){e.commit("rules/removeRule",{ruleId:t.ruleId}),e.commit("updateTopologyVersion")},changeRuleCondition:function(e,t){e.commit("rules/changeRuleCondition",{ruleId:t.ruleId,condition:t.condition}),e.commit("updateTopologyVersion")},clearAll:function(e){e.commit("items/clearAll"),e.commit("rules/clearAll"),e.commit("solutions/clearAll"),e.commit("advices/clearAll"),e.commit("updateTopologyVersion")},importAll:function(e,t){e.dispatch("clearAll");var a=Oi({data:t.data});e.commit("items/importAll",{data:a.items}),e.commit("rules/importAll",{data:a.rules}),e.commit("updateTopologyVersion")}},modules:{items:Ai,rules:ki,solutions:Li,advices:Ni}}),ji=a("f309");o["a"].use(ji["a"]);var Fi=new ji["a"]({}),Pi=a("a584");o["a"].use(Pi["a"],{config:{id:"UA-10915391-7"},appName:"Morphologic",pageTrackerScreenviewEnabled:!0},_i),o["a"].config.productionTip=!1,new o["a"]({router:_i,store:Di,vuetify:Fi,render:function(e){return e(Ba)}}).$mount("#app")},6469:function(e,t,a){e.exports=a.p+"img/group_gui.5104b3ea.png"},"6e0d":function(e,t,a){"use strict";var o=a("d343"),n=a.n(o);n.a},ac51:function(e,t,a){"use strict";var o=a("f3b1"),n=a.n(o);n.a},b139:function(e,t,a){},d343:function(e,t,a){},df9c:function(e,t,a){"use strict";var o=a("3f2e"),n=a.n(o);n.a},f3b1:function(e,t,a){}});
//# sourceMappingURL=app.7367376b.js.map