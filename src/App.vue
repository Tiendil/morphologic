<template>
<v-app>

  <v-app-bar app color="primary" dark dense flat>
    <h1>Morphology</h1>
  </v-app-bar>

  <v-content>
    <v-container>

      <v-row>

        <v-col cols="2">
          <morphology-main-panel/>
        </v-col>

        <v-col cols="10">
          <v-row>
            <v-col>
              <v-btn-toggle>
                <v-btn color="primary" outlined to="/">Groups</v-btn>
                <v-btn color="primary" outlined to="/rules">
                  Rules
                  â€”
                  {{totalRules}}
                </v-btn>
              </v-btn-toggle>
            </v-col>
          </v-row>

          <router-view/>
        </v-col>
      </v-row>
    </v-container>
  </v-content>
</v-app>
</template>

<script>
import * as uuid from 'uuid';

import * as rules from '@/logic/rules.js';

import MorphologyGroup from '@/components/MorphologyGroup';
import MorphologyMainPanel from '@/components/MorphologyMainPanel';

export default {
    name: 'App',

    components: {
        MorphologyMainPanel,
        MorphologyGroup,
    },

    data: () => ({
    }),

    computed: {
        totalRules () {
            return this.$store.getters['rules/rulesNumber'];
        }
    },

    created: function() {
        const itemsIds = [];

        for (let i=0; i<8; i++) {
            const itemId = uuid.v4();
            this.$store.dispatch("createItem", {itemId: itemId, text: `item ${i}`});
            itemsIds.push(itemId);
        }

        this.$store.dispatch("createGroupRule", {name: "XYZ",
                                                 items: [itemsIds[0], itemsIds[1], itemsIds[4]]});

        this.$store.dispatch("createGroupRule", {name: "P Q R S",
                                                 items: [itemsIds[2], itemsIds[3]]});

        this.$store.dispatch("createGroupRule", {name: "third group",
                                                 items: [itemsIds[5], itemsIds[6], itemsIds[7]]});
    }
};
</script>
